<!doctype html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="google-site-verification" content="j-Opn93zR4YQcV5bbYN99BmNc48BT5mzd2VpzKaW9YY" />

    

    
    <meta property="og:type" content="article">
    <meta property="og:url" content="/docs/reference/programming-model/">
    <meta property="og:site_name" content="pulumi">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@PulumiCorp">

    

    
        <meta property="og:title" content="Programming Model">
    

    
        <meta name="description" content="On This Page    Overview In Pulumi, resources are defined by allocating resource objects in a program. For example, your program would contain a statement such as new aws.ec2.Instance(...) in order to create a new AWS EC2 instance. The first argument passed to the resource constructor is its name, which must be unique within the Pulumi program.
Dependencies between resources are expressed in Pulumi by using the output properties of one resource in the construction of another resource.">
        <meta property="og:description" content="On This Page    Overview In Pulumi, resources are defined by allocating resource objects in a program. For example, your program would contain a statement such as new aws.ec2.Instance(...) in order to create a new AWS EC2 instance. The first argument passed to the resource constructor is its name, which must be unique within the Pulumi program.
Dependencies between resources are expressed in Pulumi by using the output properties of one resource in the construction of another resource.">
    

    
    
    <meta property="og:image" content="/social/pulumi.png">

    <title>Programming Model - Pulumi</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />

    
    <link rel="canonical" href="https://www.pulumi.com/docs/reference/programming-model/" >

    
    <link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pulumi Blog" />

    
    
    
        
        
        
        <link rel="stylesheet" href="/css/styles.3496f5522ba2ee3f8bbb9a51ff2cb20fb6827ca85a8ae61de0a9f960bacf1023.css" integrity="sha256-NJb1Uiui7j&#43;Lu5pR/yyyD7aCfKhaiuYd4Kn5YLrPECM=">
    

    <script async defer src="https://buttons.github.io/buttons.js"></script>

    
    
        <script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function(event) {
                anchors.add("h1:not(.no-anchor), h2:not(.no-anchor), h3:not(.no-anchor), h4:not(.no-anchor), h5:not(.no-anchor), h6:not(.no-anchor)");
            });
        </script>
    

    
    
</head>

    <body class="section-docs">
        <nav class="bg-black text-white text-sm py-2 px-4 lg:px-0 transition-all max-h-screen md:max-h-full">
    <div class="container mx-auto">
        <ul class="flex justify-end items-center h-6">
            <li class="mr-8"><a href="https://slack.pulumi.io/" target="_blank">Slack</a></li>
            <li class="mr-8"><a href="https://github.com/pulumi" target="_blank">GitHub</a></li>
            <li class="mr-8"><a href="https://app.pulumi.com/" target="_blank">Console</a></li>
            <li class="github-widget">
                <a class="github-button" href="https://github.com/pulumi/pulumi" data-size="small" data-show-count="true" aria-label="Star pulumi/pulumi on GitHub">Star</a>
            </li>
        </ul>
    </div>
</nav>



<nav class="nav-main bg-purple-700 py-6 px-4 lg:px-0 border-t border-purple-500">
    <div class="container mx-auto">
        <header class="flex items-center justify-between flex-wrap md:flex-no-wrap">
            <div class="flex items-center flex-shrink-0 text-white lg:mr-6">
                <a class="block" href="/">
                    <img class="h-10 block" src="/images/logo/logo-inv.svg" alt="Pulumi logo">
                </a>
            </div>

            <div class="nav-header-toggle block md:hidden">
                <button class="flex items-center px-3 py-2 border rounded text-white border-purple-400 bg-purple-600">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <ul class="nav-header-items hidden w-full flex-grow md:flex md:items-center md:w-auto text-white text-sm md:text-xs lg:text-sm uppercase pt-4 md:pt-0">
                
                    <li class="whitespace-no-wrap">
                        
                        <a href="/product/" data-submenu="product" class="block py-2 px-4 md:px-0 md:py-0 md:px-4 md:py-2 my-2 md:my-0 lg:mx-4 rounded hover:bg-purple-500">
                            Products
                        </a>
                    </li>
                
                    <li class="whitespace-no-wrap">
                        
                        <a href="/why-pulumi/" data-submenu="why" class="block py-2 px-4 md:px-0 md:py-0 md:px-4 md:py-2 my-2 md:my-0 lg:mx-4 rounded hover:bg-purple-500">
                            Why Pulumi
                        </a>
                    </li>
                
                    <li class="whitespace-no-wrap">
                        
                        <a href="/pricing/" data-submenu="" class="block py-2 px-4 md:px-0 md:py-0 md:px-4 md:py-2 my-2 md:my-0 lg:mx-4 rounded hover:bg-purple-500">
                            Pricing
                        </a>
                    </li>
                
                    <li class="whitespace-no-wrap">
                        
                        <a href="/docs/" data-submenu="" class="block py-2 px-4 md:px-0 md:py-0 md:px-4 md:py-2 my-2 md:my-0 lg:mx-4 rounded bg-purple-400 hover:bg-purple-400">
                            Docs
                        </a>
                    </li>
                
                    <li class="whitespace-no-wrap">
                        
                        <a href="/blog/" data-submenu="" class="block py-2 px-4 md:px-0 md:py-0 md:px-4 md:py-2 my-2 md:my-0 lg:mx-4 rounded hover:bg-purple-500">
                            Blog
                        </a>
                    </li>
                
                    <li class="whitespace-no-wrap">
                        
                        <a href="/about/" data-submenu="about" class="block py-2 px-4 md:px-0 md:py-0 md:px-4 md:py-2 my-2 md:my-0 lg:mx-4 rounded hover:bg-purple-500">
                            About
                        </a>
                    </li>
                

                <li class="md:ml-auto md:mr-2 lg:mr-4">
                    <a class="block mt-4 md:mt-0 md:text-xs lg:text-sm btn btn-orange-translucent" href="https://app.pulumi.com/">Sign In</a>
                </li>
                <li>
                    <a class="block mt-4 md:mt-0 md:text-xs lg:text-sm btn" href="https://app.pulumi.com/signup">Sign Up</a>
                </li>
            </ul>
        </header>
    </div>
</nav>
<div class="submenu">
    <div class="text-white relative overflow-visible">
        <div class="submenu-item submenu-item-product hidden absolute inset-x-0 z-50 bg-purple-700 shadow-lg pt-8 pb-16">
            <div class="container mx-auto flex items-start">
                <div class="w-1/2 pr-12 border-r border-purple-500 text-purple-100 text-sm">
                    <h3 class="text-white">The Pulumi Platform</h3>
                    <p class="text-white">
                        Cloud Apps and Infrastructure for any cloud using languages you already know and love.
                    </p>
                    <ul class="p-0 leading-loose">
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400" href="/product/#pulumi-sdk">Pulumi SDK</a>
                            <span>&rarr; Cloud native infrastructure as code.</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400" href="/product/#pulumi-crosswalk">Pulumi Crosswalk</a>
                            <span>&rarr; Productive infrastructure as code with built-in best practices.</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400" href="/product/#pulumi-saas">Pulumi SaaS</a>
                            <span>&rarr; Continuously deliver and manage cloud software for any cloud.</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400" href="/product/#multi-cloud-subscription">Multi-Cloud Subscription</a>
                            <span>&rarr; End-to-end Kubernetes solutions to achieve multi-cloud.</span>
                        </li>
                    </ul>
                    <p>
                        <span class="text-white">Pulumi is open source, free to start, and has plans available for teams.</span>
                        <a class="text-orange-500 hover:text-orange-400 hover:mr-1 transition-all" href="/pricing/">View Pricing</a> &rarr;
                    </p>
                </div>
                <div class="w-1/2 pl-12 text-purple-100 text-sm">
                    <h3 class="text-white">Get Started</h3>
                    <ul class="p-0 leading-loose">
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/docs/reference/install/">Install (Mac, Windows, Linux)</a> &rarr;
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/docs/">Documentation and Examples</a> &rarr;
                        </li>
                    </ul>
                    <h3 class="text-white">Migrate to Pulumi</h3>
                    <ul class="p-0 leading-loose">
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/cloudformation/">from CloudFormation</a> &rarr;
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/terraform/">from Terraform</a> &rarr;
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="submenu-item submenu-item-why hidden absolute inset-x-0 z-50 bg-purple-700 shadow pt-8 pb-16">
           <div class="container mx-auto flex items-start">
                <div class="w-1/2 pr-12 border-r border-purple-500 text-purple-100 text-sm">
                    <h3 class="text-white">Solutions for All Teams and Engineers</h3>
                    <p class="text-white">
                        Maximize cloud velocity for Dev, DevOps, and IT, no matter your team size.
                    </p>
                    <ul class="p-0 leading-loose">
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400" href="/why-pulumi/#for-developers">For Developers</a>
                            <span>&rarr; Your favorite languages, tools, and libraries.</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400" href="/why-pulumi/#for-operators">For DevOps and IT</a>
                            <span>&rarr; Empower your team to deliver to many clouds.</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400" href="/why-pulumi/#for-business-leaders">For Business Leaders</a>
                            <span>&rarr; Modern multi-cloud for startups and enterprises.</span>
                        </li>
                    </ul>
                </div>
                <div class="w-1/4 px-12 border-r border-purple-500 text-purple-100 text-sm">
                    <h3 class="text-white">Any Code</h3>
                    <ul class="p-0 leading-loose">
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/serverless/">Serverless</a>
                            <span>&rarr;</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/containers/">Containers</a>
                            <span>&rarr;</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/kubernetes/">Kubernetes</a>
                            <span>&rarr;</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/docs/reference/tutorials/aws/tutorial-ec2-webserver/">Infrastructure</a>
                            <span>&rarr;</span>
                        </li>
                    </ul>
                </div>
                <div class="w-1/4 pl-12 text-purple-100 text-sm">
                    <h3 class="text-white">Migrate to Pulumi</h3>
                    <ul class="p-0 leading-loose">
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/aws/">AWS</a>
                            <span>&rarr;</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/azure/">Azure</a>
                            <span>&rarr;</span>
                        </li>
                        <li>
                            <a class="text-orange-500 font-bold hover:text-orange-400 hover:mr-1 transition-all" href="/gcp/">GCP</a>
                            <span>&rarr;</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>


        
        

        <main>
            
    <div class="container mx-auto px-8 py-8 md:px-0">
        <div class="md:flex">

            <div class="md:w-2/12 mt-2 md:order-last">
                <div class="mb-8 md:mb-4">
                    <form class="relative" action="/docs/search/" method="GET">
    <i class="fas fa-search absolute inset-y-0 flex items-center pl-3 text-gray-500"></i>
    <input
        id="search-query"
        name="q"
        class="block w-full py-2 px-4 pl-8 text-sm border border-gray-400 focus:border-blue-500 focus:outline-none rounded transition"
        placeholder="Search the docs"
        autocomplete="off">
</form>

                </div>

                <div class="ml-3 hidden md:block">
                    
    <ul class="p-0 list-none">
        
        
        
        
        
            <li>
                <a class="text-gray-600 hover:text-blue-700 text-xs" href="https://github.com/pulumi/docs/edit/master/content/docs/reference/programming-model.md" target="_blank">
                    <i class="fas fa-edit mr-2"></i>
                    Edit this Page
                </a>
            </li>
        

        <li>
            <a class="text-gray-600 hover:text-blue-700 text-xs" href="https://github.com/pulumi/docs/issues/new?body=File: [docs%2freference%2fprogramming-model.md](%2fdocs%2freference%2fprogramming-model%2f)" target="_blank">
                <i class="far fa-check-square mr-2"></i>
                Request a Change
            </a>
        </li>
    </ul>


                </div>
            </div>

            <div class="md:w-3/12 pr-8 mt-2 mb-8 pb-8 border-b-2 border-gray-400 md:border-none md:pb-0 md:mb-0">
                








    
    
    


<aside class="toc">
    <h3 class="no-anchor">
        <a href="/docs/">Docs</a>
    </h3>

    
        <h4 class="no-anchor">
            <a href="/docs/quickstart/">Get Started</a>
        </h4>
    
    
        <h4 class="no-anchor">
            <a href="/docs/reference/">Reference</a>
        </h4>
    
    

    
        
        

        
            
            

            

                
                    
                
            

            <div class="toggleVisible separator">
                <div class="toggleVisible" data-title="Architecture &amp; Concepts">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Architecture &amp; Concepts" href="/docs/reference/concepts/">Architecture &amp; Concepts</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Architecture &amp; Concepts" href="/docs/reference/concepts/">Architecture &amp; Concepts</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        
            
        

        
            <div class="sidenav-topic mb-2 active">
                <a data-title="Programming Model" href="/docs/reference/programming-model/">Programming Model</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Projects" href="/docs/reference/project/">Projects</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Stacks" href="/docs/reference/stack/">Stacks</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Configuration and Secrets" href="/docs/reference/config/">Configuration and Secrets</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Organizing Projects and Stacks" href="/docs/reference/organizing-stacks-projects/">Organizing Projects and Stacks</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="How Pulumi Works" href="/docs/reference/how/">How Pulumi Works</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="State and Backends" href="/docs/reference/state/">State and Backends</a>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Tutorials">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Tutorials" href="/docs/reference/tutorials/">Tutorials</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Tutorials" href="/docs/reference/tutorials/">Tutorials</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div data-title="AWS">
                <div class="sidenav-topic ">
                    <a data-title="AWS" href="/docs/reference/tutorials/aws/">AWS</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="API Gateways and Lambda" href="/docs/reference/tutorials/aws/tutorial-rest-api/">API Gateways and Lambda</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Containers on ECS &#34;Fargate&#34;" href="/docs/reference/tutorials/aws/tutorial-service/">Containers on ECS &#34;Fargate&#34;</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="EC2 Linux WebServer Instance" href="/docs/reference/tutorials/aws/tutorial-ec2-webserver/">EC2 Linux WebServer Instance</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Serve a Static Website from S3" href="/docs/reference/tutorials/aws/tutorial-s3-website/">Serve a Static Website from S3</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Video Thumbnailer" href="/docs/reference/tutorials/aws/tutorial-thumbnailer/">Video Thumbnailer</a>
            </div>
        
    

                </div>
            </div>
        
    
        
        

        
            <div data-title="Azure">
                <div class="sidenav-topic ">
                    <a data-title="Azure" href="/docs/reference/tutorials/azure/">Azure</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Web Server Container Instance" href="/docs/reference/tutorials/azure/tutorial-container-webserver/">Web Server Container Instance</a>
            </div>
        
    

                </div>
            </div>
        
    
        
        

        
            <div data-title="Google Cloud">
                <div class="sidenav-topic ">
                    <a data-title="Google Cloud" href="/docs/reference/tutorials/gcp/">Google Cloud</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Web Server Virtual Machine Instance" href="/docs/reference/tutorials/gcp/tutorial-gce-webserver/">Web Server Virtual Machine Instance</a>
            </div>
        
    

                </div>
            </div>
        
    
        
        

        
            <div data-title="Kubernetes">
                <div class="sidenav-topic ">
                    <a data-title="Kubernetes" href="/docs/reference/tutorials/kubernetes/">Kubernetes</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Clusters: EKS - Hello World!" href="/docs/reference/tutorials/kubernetes/tutorial-eks/">Clusters: EKS - Hello World!</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Clusters: GKE - Hello World!" href="/docs/reference/tutorials/kubernetes/tutorial-gke/">Clusters: GKE - Hello World!</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Clusters: AKS - Hello World!" href="/docs/reference/tutorials/kubernetes/tutorial-aks/">Clusters: AKS - Hello World!</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="#1: Hello, World!" href="/docs/reference/tutorials/kubernetes/tutorial-exposed-deployment/">#1: Hello, World!</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="#2: Deploying the WordPress Helm Chart" href="/docs/reference/tutorials/kubernetes/tutorial-wordpress-chart/">#2: Deploying the WordPress Helm Chart</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="#3: Guestbook App with Redis and Nginx" href="/docs/reference/tutorials/kubernetes/tutorial-guestbook/">#3: Guestbook App with Redis and Nginx</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="#4: Graceful App Rollout" href="/docs/reference/tutorials/kubernetes/tutorial-configmap-rollout/">#4: Graceful App Rollout</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="#5: Gating rollout on Prometheus checks" href="/docs/reference/tutorials/kubernetes/tutorial-p8s-rollout/">#5: Gating rollout on Prometheus checks</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="#6: Run a Stateless App Deployment" href="/docs/reference/tutorials/kubernetes/tutorial-stateless-app/">#6: Run a Stateless App Deployment</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="#7: EKS - Migrating Node Groups with Zero Downtime" href="/docs/reference/tutorials/kubernetes/tutorial-eks-migrate-nodegroups/">#7: EKS - Migrating Node Groups with Zero Downtime</a>
            </div>
        
    

                </div>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Command Line">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Command Line" href="/docs/reference/commands/">Command Line</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Command Line" href="/docs/reference/commands/">Command Line</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Cancel" href="/docs/reference/cli/pulumi_cancel/">Cancel</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Config" href="/docs/reference/cli/pulumi_config/">Config</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Destroy" href="/docs/reference/cli/pulumi_destroy/">Destroy</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Login" href="/docs/reference/cli/pulumi_login/">Login</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Logout" href="/docs/reference/cli/pulumi_logout/">Logout</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Logs" href="/docs/reference/cli/pulumi_logs/">Logs</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="New" href="/docs/reference/cli/pulumi_new/">New</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Plugin" href="/docs/reference/cli/pulumi_plugin/">Plugin</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Preview" href="/docs/reference/cli/pulumi_preview/">Preview</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Refresh" href="/docs/reference/cli/pulumi_refresh/">Refresh</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Stack" href="/docs/reference/cli/pulumi_stack/">Stack</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="State" href="/docs/reference/cli/pulumi_state/">State</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Update" href="/docs/reference/cli/pulumi_up/">Update</a>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Supported Clouds">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Supported Clouds" href="/docs/reference/clouds/">Supported Clouds</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Supported Clouds" href="/docs/reference/clouds/">Supported Clouds</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div data-title="AWS">
                <div class="sidenav-topic ">
                    <a data-title="AWS" href="/docs/reference/clouds/aws/">AWS</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Setup" href="/docs/reference/clouds/aws/setup/">Setup</a>
            </div>
        
    

                </div>
            </div>
        
    
        
        

        
            <div data-title="Azure">
                <div class="sidenav-topic ">
                    <a data-title="Azure" href="/docs/reference/clouds/azure/">Azure</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Setup" href="/docs/reference/clouds/azure/setup/">Setup</a>
            </div>
        
    

                </div>
            </div>
        
    
        
        

        
            <div data-title="Google Cloud">
                <div class="sidenav-topic ">
                    <a data-title="Google Cloud" href="/docs/reference/clouds/gcp/">Google Cloud</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Setup" href="/docs/reference/clouds/gcp/setup/">Setup</a>
            </div>
        
    

                </div>
            </div>
        
    
        
        

        
            <div data-title="Kubernetes">
                <div class="sidenav-topic ">
                    <a data-title="Kubernetes" href="/docs/reference/clouds/kubernetes/">Kubernetes</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Introduction" href="/docs/reference/clouds/kubernetes/introduction/">Introduction</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Setup" href="/docs/reference/clouds/kubernetes/setup/">Setup</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="FAQ" href="/docs/reference/clouds/kubernetes/faq/">FAQ</a>
            </div>
        
    

                </div>
            </div>
        
    
        
        

        
            <div data-title="OpenStack">
                <div class="sidenav-topic ">
                    <a data-title="OpenStack" href="/docs/reference/clouds/openstack/">OpenStack</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Setup" href="/docs/reference/clouds/openstack/setup/">Setup</a>
            </div>
        
    

                </div>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Crosswalk for AWS ðŸ†•">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Crosswalk for AWS ðŸ†•" href="/docs/reference/crosswalk/aws/">Crosswalk for AWS ðŸ†•</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Crosswalk for AWS ðŸ†•" href="/docs/reference/crosswalk/aws/">Crosswalk for AWS ðŸ†•</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="API Gateway" href="/docs/reference/crosswalk/aws/api-gateway/">API Gateway</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Auto Scaling" href="/docs/reference/crosswalk/aws/autoscaling/">Auto Scaling</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="CloudWatch" href="/docs/reference/crosswalk/aws/cloudwatch/">CloudWatch</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Elastic Container Registry (ECR)" href="/docs/reference/crosswalk/aws/ecr/">Elastic Container Registry (ECR)</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Elastic Container Service (ECS)" href="/docs/reference/crosswalk/aws/ecs/">Elastic Container Service (ECS)</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Elastic Kubernetes Service (EKS)" href="/docs/reference/crosswalk/aws/eks/">Elastic Kubernetes Service (EKS)</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Elastic Load Balancing (ELB)" href="/docs/reference/crosswalk/aws/elb/">Elastic Load Balancing (ELB)</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Identity and Access Management (IAM)" href="/docs/reference/crosswalk/aws/iam/">Identity and Access Management (IAM)</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Lambda" href="/docs/reference/crosswalk/aws/lambda/">Lambda</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Virtual Private Cloud (VPC)" href="/docs/reference/crosswalk/aws/vpc/">Virtual Private Cloud (VPC)</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Other AWS Services" href="/docs/reference/crosswalk/aws/other/">Other AWS Services</a>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Supported Languages">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Supported Languages" href="/docs/reference/languages/">Supported Languages</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Supported Languages" href="/docs/reference/languages/">Supported Languages</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Node.js" href="/docs/reference/javascript/">Node.js</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Python" href="/docs/reference/python/">Python</a>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Teams &amp; Collaboration">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Teams &amp; Collaboration" href="/docs/reference/service/">Teams &amp; Collaboration</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Teams &amp; Collaboration" href="/docs/reference/service/">Teams &amp; Collaboration</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Organizations" href="/docs/reference/service/orgs/">Organizations</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Teams" href="/docs/reference/service/teams/">Teams</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Roles and Access Controls" href="/docs/reference/service/roles-and-access-controls/">Roles and Access Controls</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Pulumi GitHub App" href="/docs/reference/cd-github/">Pulumi GitHub App</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Pulumi Webhooks" href="/docs/reference/service/webhooks/">Pulumi Webhooks</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Creating a &#39;Deploy with Pulumi&#39; Button" href="/docs/reference/service/pulumi-button/">Creating a &#39;Deploy with Pulumi&#39; Button</a>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Continuous Delivery">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Continuous Delivery" href="/docs/reference/cd/">Continuous Delivery</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Continuous Delivery" href="/docs/reference/cd/">Continuous Delivery</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Supporting A New CI System" href="/docs/reference/cd-supporting-new-ci/">Supporting A New CI System</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="AWS Code Services" href="/docs/reference/cd-aws-code-services/">AWS Code Services</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Azure DevOps" href="/docs/reference/cd-azure-devops/">Azure DevOps</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="CircleCI" href="/docs/reference/cd-circleci/">CircleCI</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Codefresh" href="/docs/reference/cd-codefresh/">Codefresh</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="GitLab CI" href="/docs/reference/cd-gitlab-ci/">GitLab CI</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Google Cloud Build" href="/docs/reference/cd-google-cloud-build/">Google Cloud Build</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Pulumi GitHub Actions" href="/docs/reference/cd-github-actions/">Pulumi GitHub Actions</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Travis CI" href="/docs/reference/cd-travis/">Travis CI</a>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Compared to Others">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Compared to Others" href="/docs/reference/vs/">Compared to Others</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="Compared to Others" href="/docs/reference/vs/">Compared to Others</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Terraform" href="/docs/reference/vs/terraform/">Terraform</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Cloud Templates" href="/docs/reference/vs/cloud_templates/">Cloud Templates</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Cloud SDKs" href="/docs/reference/vs/cloud_sdks/">Cloud SDKs</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Serverless" href="/docs/reference/vs/serverless/">Serverless</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Kubernetes YAML" href="/docs/reference/vs/k8s_yaml_dsls/">Kubernetes YAML</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Chef, Puppet, etc." href="/docs/reference/vs/chef_puppet_etc/">Chef, Puppet, etc.</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="Custom Solutions" href="/docs/reference/vs/custom/">Custom Solutions</a>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="API Reference">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="API Reference" href="/docs/reference/pkg/">API Reference</a><span class="toggleButton">
                                    <i class="fas fa-caret-right"></i>
                                </span></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  sidenav-parent  ">
                            <a data-title="API Reference" href="/docs/reference/pkg/">API Reference</a><span class="toggleButton">
                                    <i class="fas fa-caret-down"></i>
                                </span></div>
                        
                            <div class="sidenav-subsection text-sm">
                                
    
    

    
        
        

        
            <div data-title="Node.js">
                <div class="sidenav-topic ">
                    <a data-title="Node.js" href="/docs/reference/pkg/nodejs/">Node.js</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi" href="/docs/reference/pkg/nodejs/pulumi/pulumi/">pulumi</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="aws" href="/docs/reference/pkg/nodejs/pulumi/aws/">aws</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="awsx" href="/docs/reference/pkg/nodejs/pulumi/awsx/">awsx</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="azure" href="/docs/reference/pkg/nodejs/pulumi/azure/">azure</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="azuread" href="/docs/reference/pkg/nodejs/pulumi/azuread/">azuread</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="cloud" href="/docs/reference/pkg/nodejs/pulumi/cloud/">cloud</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="cloudflare" href="/docs/reference/pkg/nodejs/pulumi/cloudflare/">cloudflare</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="datadog" href="/docs/reference/pkg/nodejs/pulumi/datadog/">datadog</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="digitalocean" href="/docs/reference/pkg/nodejs/pulumi/digitalocean/">digitalocean</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="dnsimple" href="/docs/reference/pkg/nodejs/pulumi/dnsimple/">dnsimple</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="docker" href="/docs/reference/pkg/nodejs/pulumi/docker/">docker</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="eks" href="/docs/reference/pkg/nodejs/pulumi/eks/">eks</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="f5bigip" href="/docs/reference/pkg/nodejs/pulumi/f5bigip/">f5bigip</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="gcp" href="/docs/reference/pkg/nodejs/pulumi/gcp/">gcp</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="gitlab" href="/docs/reference/pkg/nodejs/pulumi/gitlab/">gitlab</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="kubernetes" href="/docs/reference/pkg/nodejs/pulumi/kubernetes/">kubernetes</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="linode" href="/docs/reference/pkg/nodejs/pulumi/linode/">linode</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="mysql" href="/docs/reference/pkg/nodejs/pulumi/mysql/">mysql</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="newrelic" href="/docs/reference/pkg/nodejs/pulumi/newrelic/">newrelic</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="openstack" href="/docs/reference/pkg/nodejs/pulumi/openstack/">openstack</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="packet" href="/docs/reference/pkg/nodejs/pulumi/packet/">packet</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="postgresql" href="/docs/reference/pkg/nodejs/pulumi/postgresql/">postgresql</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="random" href="/docs/reference/pkg/nodejs/pulumi/random/">random</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="terraform" href="/docs/reference/pkg/nodejs/pulumi/terraform/">terraform</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="tls" href="/docs/reference/pkg/nodejs/pulumi/tls/">tls</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="vsphere" href="/docs/reference/pkg/nodejs/pulumi/vsphere/">vsphere</a>
            </div>
        
    

                </div>
            </div>
        
    
        
        

        
            <div data-title="Python">
                <div class="sidenav-topic ">
                    <a data-title="Python" href="/docs/reference/pkg/python/">Python</a>
                </div>
                <div class="sidenav-subsection">
                    
    
    

    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi" href="/docs/reference/pkg/python/pulumi/">pulumi</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_aws" href="/docs/reference/pkg/python/pulumi_aws/">pulumi_aws</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_azure" href="/docs/reference/pkg/python/pulumi_azure/">pulumi_azure</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_azuread" href="/docs/reference/pkg/python/pulumi_azuread/">pulumi_azuread</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_cloudflare" href="/docs/reference/pkg/python/pulumi_cloudflare/">pulumi_cloudflare</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_datadog" href="/docs/reference/pkg/python/pulumi_datadog/">pulumi_datadog</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_digitalocean" href="/docs/reference/pkg/python/pulumi_digitalocean/">pulumi_digitalocean</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_dnsimple" href="/docs/reference/pkg/python/pulumi_dnsimple/">pulumi_dnsimple</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_f5bigip" href="/docs/reference/pkg/python/pulumi_f5bigip/">pulumi_f5bigip</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_gcp" href="/docs/reference/pkg/python/pulumi_gcp/">pulumi_gcp</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_gitlab" href="/docs/reference/pkg/python/pulumi_gitlab/">pulumi_gitlab</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_kubernetes" href="/docs/reference/pkg/python/pulumi_kubernetes/">pulumi_kubernetes</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_linode" href="/docs/reference/pkg/python/pulumi_linode/">pulumi_linode</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_mysql" href="/docs/reference/pkg/python/pulumi_mysql/">pulumi_mysql</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_newrelic" href="/docs/reference/pkg/python/pulumi_newrelic/">pulumi_newrelic</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_openstack" href="/docs/reference/pkg/python/pulumi_openstack/">pulumi_openstack</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_postgresql" href="/docs/reference/pkg/python/pulumi_postgresql/">pulumi_postgresql</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_random" href="/docs/reference/pkg/python/pulumi_random/">pulumi_random</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_tls" href="/docs/reference/pkg/python/pulumi_tls/">pulumi_tls</a>
            </div>
        
    
        
        

        
            <div class="sidenav-topic mb-2 ">
                <a data-title="pulumi_vsphere" href="/docs/reference/pkg/python/pulumi_vsphere/">pulumi_vsphere</a>
            </div>
        
    

                </div>
            </div>
        
    

                            </div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="FAQ">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="FAQ" href="/docs/reference/faq/">FAQ</a></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  ">
                            <a data-title="FAQ" href="/docs/reference/faq/">FAQ</a></div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Download and Install">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Download and Install" href="/docs/reference/install/">Download and Install</a></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  ">
                            <a data-title="Download and Install" href="/docs/reference/install/">Download and Install</a></div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible separator">
                <div class="toggle" data-title="Changelog">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Changelog" href="/docs/reference/changelog/">Changelog</a></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  ">
                            <a data-title="Changelog" href="/docs/reference/changelog/">Changelog</a></div>
                        
                    </div>
                </div>
            </div>
        
            
            

            

                
            

            <div class="toggleVisible">
                <div class="toggle" data-title="Troubleshooting &amp; Support">
                    <div class="collapsed">
                        <div class="sidenav-topic ">
                            <a data-title="Troubleshooting &amp; Support" href="/docs/reference/troubleshooting/">Troubleshooting &amp; Support</a></div>
                    </div>
                    <div class="expanded">
                        <div class="sidenav-topic  ">
                            <a data-title="Troubleshooting &amp; Support" href="/docs/reference/troubleshooting/">Troubleshooting &amp; Support</a></div>
                        
                    </div>
                </div>
            </div>
        

    

    
</aside>



            </div>

            <div class="md:w-7/12">
                <h1>Programming Model</h1>
                

<div class="mini-toc border-b border-gray-200 mt-2 mb-8 py-6">
    <h4>On This Page</h4>
    <ul>
        
    </ul>
</div>


<h2 id="overview">Overview</h2>

<p>In Pulumi, <a href="#resources">resources</a> are defined by allocating resource objects in a program.  For example, your program would contain a statement such as <code>new aws.ec2.Instance(...)</code> in order to create a new AWS EC2 instance.  The first argument passed to the resource constructor is its <code>name</code>, which must be unique within the Pulumi program.</p>

<p>Dependencies between resources are expressed in Pulumi by using the <a href="#outputs">output properties</a> of one resource in the construction of another resource.  For example, this definition of an EC2 instance creates a dependency on a <code>SecurityGroup</code>:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">SecurityGroup</span><span class="p">(...);</span>
<span class="kd">let</span> <span class="nx">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Instance</span><span class="p">(</span><span class="s2">&#34;webserver-www&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="nx">securityGroups</span><span class="o">:</span> <span class="p">[</span> <span class="nx">group</span><span class="p">.</span><span class="nx">name</span> <span class="p">],</span> <span class="c1">// reference the security group resource above
</span><span class="c1"></span><span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">SecurityGroup</span><span class="p">(...);</span>
<span class="kd">let</span> <span class="nx">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Instance</span><span class="p">(</span><span class="s2">&#34;webserver-www&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="nx">securityGroups</span><span class="o">:</span> <span class="p">[</span> <span class="nx">group</span><span class="p">.</span><span class="nx">name</span> <span class="p">],</span> <span class="c1">// reference the security group resource above
</span><span class="c1"></span><span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">group</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">ec2</span><span class="o">.</span><span class="n">SecurityGroup</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">ec2</span><span class="o">.</span><span class="n">Instance</span><span class="p">(</span><span class="s1">&#39;webserver-www&#39;</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="n">security_groups</span><span class="o">=</span><span class="p">[</span><span class="n">group</span><span class="o">.</span><span class="n">name</span><span class="p">])</span> <span class="c1"># reference the security group resource above</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">group</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ec2</span><span class="p">.</span><span class="nf">NewSecurityGroup</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="s">&#34;webserver-securitygroup&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">SecurityGroupArgs</span><span class="p">{</span>
    <span class="o">...</span>
<span class="p">})</span>
<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">err</span>
<span class="p">}</span>
<span class="nx">server</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ec2</span><span class="p">.</span><span class="nf">NewInstance</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="s">&#34;webserver-www&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">InstanceArgs</span><span class="p">{</span>
    <span class="o">...</span>
    <span class="nx">SecurityGroups</span><span class="p">:</span> <span class="p">[]</span><span class="kd">interface</span><span class="p">{}{</span><span class="nx">group</span><span class="p">},</span> <span class="c1">// reference the security group resource above
</span><span class="c1"></span><span class="p">})</span>
<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">err</span>
<span class="p">}</span></code></pre></div>
<p>To publish values that you wish to access outside your application, create a <a href="#stack-outputs">stack output</a> via module exports.</p>

<p>In Pulumi, you can group multiple resources in a <a href="#components">component</a>. A component is a logical container for physical cloud resources and affects how resources are grouped in the CLI and the pulumi.com console.</p>

<h2 id="programs">Programs</h2>

<p>Pulumi programs are authored in general purpose programming languages such as <a href="/docs/reference/javascript/">JavaScript</a> or <a href="/docs/reference/python/">Python</a>. You can use any packages supported by the language&rsquo;s package manager, as well as <a href="/docs/reference/pkg/">Pulumi packages</a>.</p>

<p>When <code>pulumi up</code> is run, your Pulumi program is run and the Pulumi CLI determines the desired state of application resources. A Pulumi program can reference artifacts that have already been published (such as S3 objects or pre-built Docker images) or it can define application resources itself so that everything is versioned together. For example, if your program uses <code>cloud.Service</code> with a <code>build</code> step, or defines a Lambda for an S3 trigger, you&rsquo;re defining application code that is implicitly deployed during the <code>pulumi up</code>.</p>

<p>A Pulumi program is contained within a <a href="/docs/reference/project/">project</a>. In JavaScript, the <code>main</code> property of <code>package.json</code> defines the entry point for the Pulumi program.</p>

<h2 id="pulumipulumi">Pulumi SDK</h2>

<p>The <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/">@pulumi/pulumi</a> package is the core library for working with the Pulumi engine. This package defines the following kinds of resources which can be deployed with Pulumi:</p>

<ul>
<li>Resources (<a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#Resource">pulumi.Resource</a>)</li>
<li>External cloud platform resources (<a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#CustomResource">pulumi.CustomResource</a>)</li>
<li>Components defined entirely in JavaScript (<a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#ComponentResource">pulumi.ComponentResource</a>)</li>
</ul>

<p>Dependencies between resources are encoded with <a href="#outputs">pulumi.Output</a>.</p>

<p>This package also provides the following helpers:</p>

<ul>
<li><a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#getStack">pulumi.getStack</a> to get information about the current stack</li>
<li><a href="/docs/reference/pkg/nodejs/pulumi/pulumi/log/">pulumi.log</a> for logging deployment information</li>
<li><a href="/docs/reference/pkg/nodejs/pulumi/pulumi/runtime/#serializeFunction">pulumi.runtime.serializeFunction</a> for turning JavaScript callbacks into data which can be <a href="#runtime">used as application code</a>.</li>
</ul>

<h2 id="resources">Resources</h2>

<p>A resource is created with the following:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Resource</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Resource</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">res</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">res</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">NewResource</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">opt1</span><span class="p">,</span> <span class="nx">opt2</span><span class="p">)</span></code></pre></div>
<p>All resources have a <a href="#names"><code>name</code></a>, which must be unique in the Pulumi program.</p>

<p>The <code>args</code> provided to a resource determine what inputs will be used to initialize the resource.  These can typically be either raw values or <a href="#outputs">outputs from other resources</a>.</p>

<h3 id="resourceoptions">Resource options</h3>

<p>All resource constructors also accept an <code>options</code> argument which can provide the following additional resource options controlling how the resource will be managed by Pulumi.</p>

<h6 id="additionalsecretoutputs"><code>additionalSecretOutputs</code></h6>

<p>Provides a list of output properties which should be treated as secrets. This value augments any values that Pulumi detects itself, based on what secret inputs to the resource has. This is typically used to express that for a specific instance of a resource, some of its output properties should be treated as secrets (when they would not normally be).</p>

<h6 id="aliases"><code>aliases</code></h6>

<p>Provides a list of aliases for a resource or component. When making a breaking change to the name or type of a resource or component, you can add the old name to the list of <code>aliases</code> for a resource to ensure that existing resources will be migrated to the new name instead of being deleted and replaced with the new named resource.</p>

<p>For example, a resource can be aliased to a full previous <a href="#urns">resource URN</a>:</p>

<p><code>aliases: [&quot;urn:pulumi:stackname::projectname::aws:s3/bucket:Bucket::app-function&quot;]</code></p>

<p>Or it can be aliased to a relative change to the resource&rsquo;s name, parent, and/or type:</p>

<p><code>aliases: [{ name: &quot;otherchild&quot;, parent: this }]</code></p>

<h6 id="customtimeouts"><code>customTimeouts</code></h6>

<p>Provides a set of custom timeouts for <code>create</code>, <code>update</code>, and <code>delete</code> operations on a resource. These timeouts can be specified as a string like &ldquo;5m&rdquo;, &ldquo;40s&rdquo;, or &ldquo;1d&rdquo; (5 minutes, 40 seconds, or 1 day, respectively). For example, <code>customTimeouts: { create: &quot;1m&quot; }</code>.</p>

<h6 id="deletebeforereplace"><code>deleteBeforeReplace</code></h6>

<p>Set this option to <code>true</code> to specify that replacements of the resource will delete the existing resource before creating its replacement.  This will lead to downtime during the replacement, but may be necessary for some resources that manage scarce resources behind the scenes.  The default is <code>false</code>.</p>

<h6 id="dependson"><code>dependsOn</code></h6>

<p>Provides a list of explicit resource dependencies to add to the resource. Every resource referenced either directly or indirectly by an <code>Output</code> that is passed in to the resource constructor will implicitly be included, so this additional information is only needed when the dependency is on something that is not already an input to the resource. The default is <code>[]</code>.</p>

<h6 id="ignorechanges"><code>ignoreChanges</code></h6>

<p>Provides a list of properties which will be ignored as part of updates. The value of the property will be used for newly created resources, but will not be used as part of updates. This is typically used to avoid changes in properties leading to diffs or to change defaults for a property without forcing all existing deployed stacks to update or replace the affected resource.</p>

<h6 id="import"><code>import</code></h6>

<p>The ID of an existing resource to import for Pulumi to manage. When set, Pulumi will read the current state of the resource with the given ID from the backing provider &ndash; AWS, Azure, GCP, or Kubernetes for example. The inputs to the resource&rsquo;s constructor must not differ from this state or the import will fail. Once a resource has been imported, this property should be unset.</p>

<h6 id="parent"><code>parent</code></h6>

<p>A parent for the resource. See <a href="#components">Components</a>.  The default is to parent to the implicitly-created <code>Stack</code> resource that is a root resource for all Pulumi stacks.</p>

<h6 id="protect"><code>protect</code></h6>

<p>Marks a resource as protected. A protected resource cannot be deleted directly: First, you must set <code>protect: false</code> and run <code>pulumi up</code>. Then, you can delete the resource by removing the line of code or by running <code>pulumi destroy</code>.  The default is to inherit this value from the parent resource, and <code>false</code> for resources without a parent.</p>

<h6 id="provider"><code>provider</code></h6>

<p>A provider for the resource. See <a href="#providers">Providers</a>.  The default is to inherit this value from the parent resource, and to use the ambient provider specified by Pulumi configuration for resources without a parent.</p>

<h3 id="names">Resource names</h3>

<p>Every resource managed by Pulumi has a name.  This name is used to track the identity of a resource across multiple deployments of the same program.  The name specified during resource creation is used in three ways:</p>

<ol>
<li>It is used as part of constructing the Universal Resource Name (URN) used by the Pulumi engine to track the resource across updates.</li>
<li>Most resource providers will use it as a default prefix for constructing the cloud-provider name of the resource.</li>
<li>Some CLI commands use the URN.</li>
</ol>

<h4 id="urns">URNs</h4>

<p>The URN of a resource is constructed from the name provided by the resource, the type of the resource, and the types of all the parent component resources.  It also includes information about the project and stack.  For example:</p>

<pre><code>urn:pulumi:thumbnailer-twitch::video-thumbnailer::cloud:bucket:Bucket$cloud:function:Function::onNewThumbnail
urn:pulumi:    &lt;stackname&gt;   ::  &lt;projectname&gt;  ::    &lt;parenttype&gt;   $     &lt;resourcetype&gt;    ::&lt;resourcename&gt;
</code></pre>

<blockquote>
<p>Note: It is likely that the format of the URN will be changed in the future to be simpler and more flexible.</p>
</blockquote>

<p>Because it is used as the unique identity of a resource within a stack, this URN must be unique for each resource created by a single Pulumi program.  In particular, this requires that the resource name must be unique among resources of the same type with the same type of parent component.</p>

<p>Any change to the URN of a resource will cause the old and new resources to be treated as unrelated - the new one will be created (since it was not in the prior state) and the old one will be deleted (since it is not in the new desired state). This includes changing the <code>name</code> used to construct the resource or changing the parent of a resource.  Both of these operations will lead to a different URN, and thus to a <code>create</code> and a <code>delete</code> operation instead of an <code>update</code> or <code>replace</code> operation of the resource.  As a result, changes to names must be made with care.</p>

<p>Resources constructed as children of a <a href="#components">component</a> should make sure that their names will be unique across multiple instances of the component.  In general, that means that the name of the component instance itself (the <code>name</code> parameter passed in to the component constructor) shoud be used as part of the name of the child resources.</p>

<h4 id="autonaming">Auto-naming</h4>

<p>The name of a resource is also used by many providers as a default prefix for constructing the cloud-provider name for the resource.  For example, constructing a <code>new aws.s3.Bucket(&quot;mybucket&quot;)</code> will result in an AWS bucket named something like <code>mybucket-eb24ea8</code>.</p>

<p>This random postfix is added by default for two reasons.  First, it ensures that two instances of a program can be deployed to the same environment without risk of name collisions.  Second, it ensures that it will be possible to do zero-downtime replacements when needed, by creating the new resource first, updating any references to point to it, and then deleting the old resource.</p>

<p>In cases where the two proprties above are not required, and where it would be useful to be able to precisely specify the name, it is typically possible to provide a <code>name:</code> argument to the resource inputs to specify an explicit cloud-provider name.  For resources that may need to be replaced, this will often require also specifying <code>deleteBeforeReplace: true</code> in the resources&rsquo;s <code>ResourceOptions</code>.</p>

<h4 id="resource-get-resource-get">Resource get (#resource-get)</h4>

<p>A <code>get</code> method is available on any resource, which reads in the current value of an existing resource.  The shape it returns corresponds to the type of the resource.</p>

<h2 id="outputs">Outputs and Inputs</h2>

<p>Outputs are a key part of how Pulumi tracks dependencies between resources.  Because the values of Outputs are not available until resources are created, these are represented using the special <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#output"><code>Output</code></a> type, which internally represents two things:</p>

<ol>
<li>An eventually available value of the output</li>
<li>The dependency on the source(s) of the output value</li>
</ol>

<p>In fact, <code>Output</code>s are similar to promises/futures that you may be familiar with from other programming models. Additionally, they carry along dependency information.</p>

<p>The output properties of all resource objects in Pulumi have type <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#output"><code>Output</code></a>.</p>

<p>Resource inputs have type <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#Input"><code>Input</code></a>, which accepts either a raw value, a <code>Promise</code>, or an output from another resource. This allows dependencies to be inferred, including ensuring that resources are not created or updated until all their dependencies are available and up to date.</p>

<h5 id="apply">Apply</h5>

<p>To transform an output into a new value, use the <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#OutputInstance-apply"><code>apply</code> method</a>. For example, use the following to create an HTTPS URL from the DNS name of a virtual machine:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">virtualmachine</span><span class="p">.</span><span class="nx">dnsName</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">dnsName</span> <span class="p">=&gt;</span> <span class="s2">&#34;https://&#34;</span> <span class="o">+</span> <span class="nx">dnsName</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">virtualmachine</span><span class="p">.</span><span class="nx">dnsName</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">dnsName</span> <span class="o">=&gt;</span> <span class="s2">&#34;https://&#34;</span> <span class="o">+</span> <span class="nx">dnsName</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">url</span> <span class="o">=</span> <span class="n">virtual_machine</span><span class="o">.</span><span class="n">dns_name</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">dns_name</span><span class="p">:</span> <span class="s2">&#34;https://&#34;</span> <span class="o">+</span> <span class="n">dns_name</span>
<span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">url</span> <span class="o">:=</span> <span class="nx">virtualmachine</span><span class="p">.</span><span class="nf">DnsName</span><span class="p">().</span><span class="nf">Apply</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">dnsName</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kd">interface</span><span class="p">{},</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&#34;https://&#34;</span> <span class="o">+</span> <span class="nx">dnsName</span><span class="p">,</span> <span class="kc">nil</span>
<span class="p">})</span></code></pre></div>
<p>The <code>apply</code> method accepts a callback which will be passed the value of the <code>Output</code> when it is available, and which returns the new value.  The result of the call to <code>apply</code> is a new <code>Output</code> whose value is the value returned from the callback, and which includes the dependencies of the original <code>Output</code>.  If the callback itself returns an <code>Output</code>, the dependencies of that output are unioned into the dependencies of the returned <code>Output</code>.</p>

<blockquote>
<p><em>Note</em>: Several common types of transformations can be done more convienently.  See <a href="#lifting">Accessing properties of an Output</a> for how to access Output value properties simply.   Also, <code>Output</code> itself cannot be used directly in string concatenation as it is not itself the value of the output.  See (Working with Outputs and strings)[#ouputs-and-strings] for examples of how to more simply work use the two together.  For cases where these convenience forms are not sufficient, <code>.apply</code> is available the most general way to transform one <code>Output</code> into another.</p>
</blockquote>

<h5 id="lifting">Accessing properties of an Output</h5>

<p>It is common to need to only access some property of the value of an <code>Output</code> in order to pass in that property to another <code>Resource</code>.  For example, when using ACM certificates one might write:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">certCertificate</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">acm</span><span class="p">.</span><span class="nx">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">domainName</span><span class="o">:</span> <span class="s2">&#34;example.com&#34;</span><span class="p">,</span>
  <span class="nx">validationMethod</span><span class="o">:</span> <span class="s2">&#34;DNS&#34;</span><span class="p">,</span>
<span class="p">});</span>
<span class="kd">let</span> <span class="nx">certValidation</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">route53</span><span class="p">.</span><span class="nx">Record</span><span class="p">(</span><span class="s2">&#34;cert_validation&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// Need to pass along a deep subproperty of this Output
</span><span class="c1"></span>  <span class="nx">records</span><span class="o">:</span> <span class="p">[</span><span class="nx">certCertificate</span><span class="p">.</span><span class="nx">domainValidationOptions</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">domainValidationOptions</span> <span class="p">=&gt;</span> <span class="nx">domainValidationOptions</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">resourceRecordValue</span><span class="p">)],</span>
  <span class="p">...</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">certCertificate</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">acm</span><span class="p">.</span><span class="nx">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">domainName</span><span class="o">:</span> <span class="s2">&#34;example.com&#34;</span><span class="p">,</span>
  <span class="nx">validationMethod</span><span class="o">:</span> <span class="s2">&#34;DNS&#34;</span><span class="p">,</span>
<span class="p">});</span>
<span class="kd">let</span> <span class="nx">certValidation</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">route53</span><span class="p">.</span><span class="nx">Record</span><span class="p">(</span><span class="s2">&#34;cert_validation&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// Need to pass along a deep subproperty of this Output
</span><span class="c1"></span>  <span class="nx">records</span><span class="o">:</span> <span class="p">[</span><span class="nx">certCertificate</span><span class="p">.</span><span class="nx">domainValidationOptions</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">domainValidationOptions</span> <span class="o">=&gt;</span> <span class="nx">domainValidationOptions</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">resourceRecordValue</span><span class="p">)],</span>
  <span class="p">...</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">certificate</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">acm</span><span class="o">.</span><span class="n">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span>
  <span class="n">domain_name</span><span class="o">=</span><span class="s2">&#34;example.com&#34;</span><span class="p">,</span>
  <span class="n">validation_method</span><span class="o">=</span><span class="s2">&#34;DNS&#34;</span><span class="p">,</span>

<span class="n">record</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">route53</span><span class="o">.</span><span class="n">Record</span><span class="p">(</span><span class="s2">&#34;validation&#34;</span><span class="p">,</span>
  <span class="c1"># Need to pass along a deep subproperty of this Output</span>
  <span class="n">records</span><span class="o">=</span><span class="p">[</span><span class="n">certificate</span><span class="o">.</span><span class="n">domain_validation_options</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span>
      <span class="k">lambda</span> <span class="n">domain_validation_options</span><span class="p">:</span> <span class="n">domain_validation_options</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">resource_record_value</span>
  <span class="p">)],</span>
  <span class="o">...</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Helpers for accessing properties are not yet available in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>To make this kind of property and array-element access more simple, an <code>Output</code> &lsquo;lifts&rsquo; the properties of the value that is wrapped, allowing you to access them directly off of the <code>Output</code> itself.  This allows the above to be more simply written as:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">certCertificate</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">acm</span><span class="p">.</span><span class="nx">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">domainName</span><span class="o">:</span> <span class="s2">&#34;example.com&#34;</span><span class="p">,</span>
  <span class="nx">validationMethod</span><span class="o">:</span> <span class="s2">&#34;DNS&#34;</span><span class="p">,</span>
<span class="p">});</span>
<span class="kd">let</span> <span class="nx">certValidation</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">route53</span><span class="p">.</span><span class="nx">Record</span><span class="p">(</span><span class="s2">&#34;cert_validation&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">records</span><span class="o">:</span> <span class="p">[</span><span class="nx">certCertificate</span><span class="p">.</span><span class="nx">domainValidationOptions</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">resourceRecordValue</span><span class="p">],</span>
  <span class="p">...</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">certCertificate</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">acm</span><span class="p">.</span><span class="nx">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">domainName</span><span class="o">:</span> <span class="s2">&#34;example.com&#34;</span><span class="p">,</span>
  <span class="nx">validationMethod</span><span class="o">:</span> <span class="s2">&#34;DNS&#34;</span><span class="p">,</span>
<span class="p">});</span>
<span class="kd">let</span> <span class="nx">certValidation</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">route53</span><span class="p">.</span><span class="nx">Record</span><span class="p">(</span><span class="s2">&#34;cert_validation&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">records</span><span class="o">:</span> <span class="p">[</span><span class="nx">certCertificate</span><span class="p">.</span><span class="nx">domainValidationOptions</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">resourceRecordValue</span><span class="p">],</span>
  <span class="p">...</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">certificate</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">acm</span><span class="o">.</span><span class="n">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span>
  <span class="n">domain_name</span><span class="o">=</span><span class="s2">&#34;example.com&#34;</span><span class="p">,</span>
  <span class="n">validation_method</span><span class="o">=</span><span class="s2">&#34;DNS&#34;</span><span class="p">,</span>

<span class="n">record</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">route53</span><span class="o">.</span><span class="n">Record</span><span class="p">(</span><span class="s2">&#34;validation&#34;</span><span class="p">,</span>
  <span class="n">records</span><span class="o">=</span><span class="p">[</span><span class="n">certificate</span><span class="o">.</span><span class="n">domain_validation_options</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">resource_record_value</span><span class="p">],</span>
  <span class="o">...</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Helpers for accessing properties are not yet available in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>This helps the clarity of the final code, while not losing any important dependency information that is needed for properly creating and maintaining the stack.</p>

<h5 id="all">All</h5>

<p>To combine multiple <code>Output</code>s into a transformed value, use <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#all">pulumi.all</a>.  This allows a new value to be constructed from several inputs, such as concatenating outputs from two different resources together, or constructing a policy document using information from several other resources.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">connectionString</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span><span class="nx">sqlServer</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">database</span><span class="p">.</span><span class="nx">name</span><span class="p">])</span>
                             <span class="p">.</span><span class="nx">apply</span><span class="p">(([</span><span class="nx">server</span><span class="p">,</span> <span class="nx">db</span><span class="p">])</span> <span class="p">=&gt;</span> <span class="sb">`Server=tcp:</span><span class="si">${</span><span class="nx">server</span><span class="si">}</span><span class="sb">.database.windows.net;initial catalog=</span><span class="si">${</span><span class="nx">db</span><span class="si">}</span><span class="sb">...`</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">connectionString</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span><span class="nx">sqlServer</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">database</span><span class="p">.</span><span class="nx">name</span><span class="p">])</span>
                             <span class="p">.</span><span class="nx">apply</span><span class="p">(([</span><span class="nx">server</span><span class="p">,</span> <span class="nx">db</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="sb">`Server=tcp:</span><span class="si">${</span><span class="nx">server</span><span class="si">}</span><span class="sb">.database.windows.net;initial catalog=</span><span class="si">${</span><span class="nx">db</span><span class="si">}</span><span class="sb">...`</span><span class="p">);</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pulumi</span> <span class="kn">import</span> <span class="n">Output</span>

<span class="n">connection_string</span> <span class="o">=</span> <span class="n">Output</span><span class="o">.</span><span class="nb">all</span><span class="p">(</span><span class="n">sql_server</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">database</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> \
    <span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">args</span><span class="p">:</span> <span class="n">f</span><span class="s2">&#34;Server=tcp:{args[0]}.database.windows.net;initial catalog={args[1]}...&#34;</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// `all` is not yet available in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<h5 id="frominput">Convert Input to Output</h5>

<p>To turn an <code>Input</code> into an <code>Output</code>, use <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#output">pulumi.output</a>.  This can be useful when you want to transform an input value that could either be a raw value or an <code>Output</code>:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">split</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">output</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">v</span> <span class="p">=&gt;</span> <span class="nx">v</span><span class="p">.</span><span class="nx">split</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">function</span> <span class="nx">split</span><span class="p">(</span><span class="nx">input</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">)</span><span class="o">:</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Output</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">output</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">v</span> <span class="o">=&gt;</span> <span class="nx">v</span><span class="p">.</span><span class="nx">split</span><span class="p">());</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">Output</span><span class="o">.</span><span class="n">from_input</span><span class="p">(</span><span class="nb">input</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">output</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">());</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Helpers for converting Inputs to Outputs are not yet available in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<h5 id="outputs-and-strings">Working with Outputs and strings</h5>

<p>It&rsquo;s very common to want to build a string out of the values contained in <code>Outputs</code>.  Common uses for this are to either provide a custom <a href="#stack-outputs">stack output</a>, or to provide a dynamically computed string as an <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#Input">Input</a> to another Resource.  For example, say you had the following:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">const</span> <span class="nx">hostName</span> <span class="o">=</span> <span class="c1">// get some Output
</span><span class="c1"></span><span class="k">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="c1">// get some Output
</span><span class="c1"></span>
<span class="c1">// Would like to produce a string equivalent to: http://${hostname}:${port}/
</span><span class="c1"></span><span class="k">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="c1">// ?
</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">const</span> <span class="nx">hostName</span>: <span class="kt">Output</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="c1">// get some Output
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">port</span>: <span class="kt">Output</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span> <span class="o">=</span> <span class="c1">// get some Output
</span><span class="c1"></span>
<span class="c1">// Would like to produce a string equivalent to: http://${hostname}:${port}/
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">url</span>: <span class="kt">Output</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="err">// ?</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Helpers for combining Outputs into strings are not yet available in Python.</span>
<span class="c1">#</span>
<span class="c1"># See https://github.com/pulumi/pulumi/issues/2366.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Helpers for combining Outputs into strings are not yet available in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>Using <a href="#apply">.apply</a> and <a href="#all">.all</a> this could be solved as shown above like so:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span><span class="nx">hostname</span><span class="p">,</span> <span class="nx">port</span><span class="p">]).</span><span class="nx">apply</span><span class="p">(([</span><span class="nx">hostname</span><span class="p">,</span> <span class="nx">port</span><span class="p">])</span> <span class="p">=&gt;</span> <span class="sb">`http://</span><span class="si">${</span><span class="nx">hostname</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">/`</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">const</span> <span class="nx">url</span>: <span class="kt">Output</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span><span class="nx">hostname</span><span class="p">,</span> <span class="nx">port</span><span class="p">]).</span><span class="nx">apply</span><span class="p">(([</span><span class="nx">hostname</span><span class="p">,</span> <span class="nx">port</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="sb">`http://</span><span class="si">${</span><span class="nx">hostname</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">/`</span><span class="p">);</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Helpers for combining Outputs into strings are not yet available in Python.</span>
<span class="c1">#</span>
<span class="c1"># See https://github.com/pulumi/pulumi/issues/2366.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Helpers for combining Outputs into strings are not yet available in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>However, this is quite verbose and unwieldy.  To make this easier, Pulumi exposes two helpers <code>concat</code> and <code>interpolate</code>  to make this more convenient.  They can be used as follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">const</span> <span class="nx">url1</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="s2">&#34;http://&#34;</span><span class="p">,</span> <span class="nx">hostname</span><span class="p">,</span> <span class="s2">&#34;:&#34;</span><span class="p">,</span> <span class="nx">port</span><span class="p">,</span> <span class="s2">&#34;/&#34;</span><span class="p">);</span>
<span class="k">const</span> <span class="nx">url2</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">interpolate</span> <span class="sb">`http://</span><span class="si">${</span><span class="nx">hostname</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">/`</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">const</span> <span class="nx">url1</span>: <span class="kt">Output</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="s2">&#34;http://&#34;</span><span class="p">,</span> <span class="nx">hostname</span><span class="p">,</span> <span class="s2">&#34;:&#34;</span><span class="p">,</span> <span class="nx">port</span><span class="p">,</span> <span class="s2">&#34;/&#34;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">url2</span>: <span class="kt">Output</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">interpolate</span> <span class="sb">`http://</span><span class="si">${</span><span class="nx">hostname</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">/`</span><span class="p">;</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Helpers for combining Outputs into strings are not yet available in Python.</span>
<span class="c1">#</span>
<span class="c1"># See https://github.com/pulumi/pulumi/issues/2366.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Helpers for combining Outputs into strings are not yet available in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p><code>concat</code> takes a list of arguments that can be <code>Inputs</code>, <code>Outputs</code>, <code>Promises</code> and simple JavaScript values, and creates an <code>Output</code> with all their underlying values concatenated together.  <code>interpolate</code> does the same, but allows you to use a JavaScript <code>template literal</code> if that&rsquo;s your preferred way of combining values into strings.</p>

<h2 id="secrets">Secrets</h2>

<p>When constructing resources, Pulumi will record all inputs and outputs from a resource it is state file.  Some of these properties may contain sensitive data, which should be encrypted before being stored in the state file. For example, consider the following program which creates an AWS Parameter Store parameter.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">const</span> <span class="nx">cfg</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Config</span><span class="p">()</span>
<span class="k">const</span> <span class="nx">param</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ssm</span><span class="p">.</span><span class="nx">Parameter</span><span class="p">(</span><span class="s2">&#34;a-secret-param&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;SecureString&#34;</span><span class="p">,</span>
    <span class="nx">value</span><span class="o">:</span> <span class="nx">cfg</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;my-secret-value&#34;</span><span class="p">),</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">const</span> <span class="nx">cfg</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Config</span><span class="p">()</span>
<span class="kr">const</span> <span class="nx">param</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ssm</span><span class="p">.</span><span class="nx">Parameter</span><span class="p">(</span><span class="s2">&#34;a-secret-param&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;SecureString&#34;</span><span class="p">,</span>
    <span class="nx">value</span>: <span class="kt">cfg.require</span><span class="p">(</span><span class="s2">&#34;my-secret-value&#34;</span><span class="p">),</span>
<span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">cfg</span> <span class="o">=</span> <span class="n">pulumi</span><span class="o">.</span><span class="n">Config</span><span class="p">()</span>
<span class="n">param</span> <span class="o">=</span> <span class="n">ssm</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&#34;a-secret-param&#34;</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="s2">&#34;SecureString&#34;</span><span class="p">,</span>
    <span class="n">value</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="s2">&#34;my-secret-value&#34;</span><span class="p">))</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Secrets are not yet avaiaible in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mi">2820</span></code></pre></div>
<p>As written, the state file for this program will show the plaintext value of the &ldquo;my-secret-value&rdquo; configuration variable as an input to the <code>Parameter</code> resource.  Pulumi provides a way to mark a value as &ldquo;secret&rdquo; such that if it stored in the state file, it will be encrypted in the same way secret configuration values are.  There are two ways to create secret values:</p>

<ol>
<li>By calling <code>requireSecret</code> or <code>getSecret</code> (JavaScript) or <code>require_secret</code> or <code>get_secret</code> (Python) when reading a value from config.</li>
<li>Using <code>pulumi.secret</code> (JavaScript) or <code>Output.secret</code> (Python) to construct a secret from an existing value.</li>
</ol>

<p>We can change the above code to look like the following:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">const</span> <span class="nx">cfg</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Config</span><span class="p">()</span>
<span class="k">const</span> <span class="nx">param</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ssm</span><span class="p">.</span><span class="nx">Parameter</span><span class="p">(</span><span class="s2">&#34;a-secret-param&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;SecureString&#34;</span><span class="p">,</span>
    <span class="nx">value</span><span class="o">:</span> <span class="nx">cfg</span><span class="p">.</span><span class="nx">requireSecret</span><span class="p">(</span><span class="s2">&#34;my-secret-value&#34;</span><span class="p">),</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">const</span> <span class="nx">cfg</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Config</span><span class="p">()</span>
<span class="kr">const</span> <span class="nx">param</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ssm</span><span class="p">.</span><span class="nx">Parameter</span><span class="p">(</span><span class="s2">&#34;a-secret-param&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;SecureString&#34;</span><span class="p">,</span>
    <span class="nx">value</span>: <span class="kt">cfg.requireSecret</span><span class="p">(</span><span class="s2">&#34;my-secret-value&#34;</span><span class="p">),</span>
<span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">cfg</span> <span class="o">=</span> <span class="n">pulumi</span><span class="o">.</span><span class="n">Config</span><span class="p">()</span>
<span class="n">param</span> <span class="o">=</span> <span class="n">ssm</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&#34;a-secret-param&#34;</span><span class="p">,</span> 
    <span class="nb">type</span><span class="o">=</span><span class="s2">&#34;SecureString&#34;</span><span class="p">,</span>
    <span class="n">value</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">require_secret</span><span class="p">(</span><span class="s2">&#34;my-secret-value&#34;</span><span class="p">))</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Secrets are not yet avaiaible in Go.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mi">2820</span></code></pre></div>
<p>In which case the value property of the <code>Parameter</code> resource will now be encrypted in the state file.</p>

<p>Secrets behave just like normal <code>Output</code>&rsquo;s in Pulumi (in fact, their type is simply <code>Output</code>), except they are marked internally as needed to be encrypted before being persisted in the state file. When you combine an existing Output that is marked as a secret (either via <code>apply</code> or <code>all</code>) with out values, the resulting Output is also marked as a secret.</p>

<blockquote>
<p><strong>Note</strong>: During an <code>apply</code> you have access to the raw value of the underlying secret.  While Pulumi ensures that the value returned from an <code>apply</code> is marked as secret, it can not enforce that any work done inside the <code>apply</code> itself will not leak the secret value.  For example, inside an apply you could explicitly make a call to print the value to the console or save it to a file. Becasue of this, care must be taken inside the apply to ensure your code does not cause the value to be leaked.</p>
</blockquote>

<p>Unlike regular Outputs, secret outputs cannot be captured by Pulumi closure serialization system and attempting to do so will lead to an exception. We do plan to support this once we can ensure the values will be persisted securely (see <a href="https://github.com/pulumi/pulumi/issues/2718">pulumi/pulumi#2718</a>).</p>

<p>While Pulumi ensures that any outputs of a resource which have coresponding secret inputs are marked as secrets, there may be additional outputs that you wish to mark as secrets. In this case, you can pass the <code>additionalSecretOutputs</code> (JavaScript) or <code>additional_secret_outputs</code> (Python) option when creating a resource to ensure these extra output values are encrypted before being stored in the state file.</p>

<h2 id="stack-outputs">Stack output</h2>

<p>A <a href="/docs/reference/stack/#outputs">stack output</a> is a value exported from a stack. A stack&rsquo;s outputs can be easily retrieved from the Pulumi CLI and is displayed on pulumi.com. To export values from a stack, use the following definition in the top-level of the entry point for your project:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">exports</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">resource</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">export</span> <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">resource</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pulumi</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">,</span> <span class="n">resource</span><span class="o">.</span><span class="n">url</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">ctx</span><span class="p">.</span><span class="nf">Export</span><span class="p">(</span><span class="s">&#34;url&#34;</span><span class="p">,</span> <span class="nx">resource</span><span class="p">.</span><span class="nf">Url</span><span class="p">())</span></code></pre></div>
<p>From the CLI, you can then use <code>pulumi stack output url</code> to get the value and incorporate into other scripts or tools.</p>

<p>The right-hand side of a stack export can be a regular JavaScript value, an <a href="#outputs">Output</a>, or a <code>Promise</code>. The actual value will be resolved at the end of <code>pulumi up</code>.</p>

<p>Stack exports are JSON serialized, though quotes are removed when exporting just a string value. For example:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">exports</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="s2">&#34;hello&#34;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">num</span><span class="o">:</span> <span class="mi">42</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">export</span> <span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="s2">&#34;hello&#34;</span><span class="p">;</span>
<span class="kr">export</span> <span class="kd">let</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">num</span>: <span class="kt">42</span><span class="p">};</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pulumi</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s2">&#34;x&#34;</span><span class="p">,</span> <span class="s2">&#34;hello&#34;</span><span class="p">)</span>
<span class="n">pulumi</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s2">&#34;o&#34;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;num&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">ctx</span><span class="p">.</span><span class="nf">Export</span><span class="p">(</span><span class="s">&#34;x&#34;</span><span class="p">,</span> <span class="s">&#34;hello&#34;</span><span class="p">)</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nf">Export</span><span class="p">(</span><span class="s">&#34;o&#34;</span><span class="p">,</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}{</span>
    <span class="s">&#34;num&#34;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
<span class="p">})</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pulumi stack output x
hello
$ pulumi stack output o
<span class="o">{</span><span class="s2">&#34;num&#34;</span>: <span class="m">42</span><span class="o">}</span></code></pre></div>
<p>The full set of outputs can be rendered as JSON using <code>pulumi stack output --json</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pulumi stack output --json
<span class="o">{</span>
  <span class="s2">&#34;x&#34;</span>: <span class="s2">&#34;hello&#34;</span>,
  <span class="s2">&#34;o&#34;</span>: <span class="o">{</span>
      <span class="s2">&#34;num&#34;</span>: <span class="m">42</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div>
<p>If a stack contains any output values which are marked as secrets, their values will not be shown by default (instead they will be displayed as <code>[secret]</code> in the CLI). You may pass <code>--show-secrets</code> to <code>pulumi stack output</code> to see the plaintext value.</p>

<h2 id="config">Config</h2>

<p>To access configuration values that have been set with <code>pulumi config set</code>, use the following:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Config</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Hello, </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">!`</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Config</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Hello, </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">!`</span><span class="p">);</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">config</span> <span class="o">=</span> <span class="n">pulumi</span><span class="o">.</span><span class="n">Config</span><span class="p">(</span><span class="s2">&#34;project&#34;</span><span class="p">);</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">);</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;Hello, {name}!&#34;</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">conf</span> <span class="p">=</span> <span class="nx">config</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="s">&#34;project&#34;</span><span class="p">);</span>
<span class="nx">name</span> <span class="p">=</span> <span class="nx">conf</span><span class="p">.</span><span class="nf">Require</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">);</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Hello, %s!&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span></code></pre></div>
<p>Config values can be retrieved using <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#method-get">config.get</a> or <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#method-require">config.require</a>.  Using <code>get</code> will return <code>undefined</code> if the configuration value was not provided, and <code>require</code> will raise an exception with a helpful error message to prevent the deployment from continuing.</p>

<p>Configuration values are always stored as strings, but can be parsed as richly typed values.  For example, <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#method-getnumber">config.getNumber</a> will convert the string value to a number and return a <code>Number</code> value instead of a string.  It will raise an exception if the value cannot be parsed as a number.</p>

<p>For richer structured data, the <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#method-getobject">config.getObject</a> method can be used to parse JSON values.  For example, following <code>pulumi config set data '{&quot;active&quot;: true, &quot;nums&quot;: [1,2,3]}'</code>, a program can read the <code>data</code> config into a rich object with:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Config</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">requireObject</span><span class="p">(</span><span class="s2">&#34;data&#34;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Active: </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">interface</span> <span class="nx">Data</span> <span class="p">{</span>
    <span class="nx">active</span>: <span class="kt">boolean</span><span class="p">;</span>
    <span class="nx">nums</span>: <span class="kt">number</span><span class="p">[];</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">Config</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">requireObject</span><span class="o">&lt;</span><span class="nx">Data</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">&#34;data&#34;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Active: </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># JSON parsing helpers for config are not built-in for Python currently.</span>
<span class="c1">#</span>
<span class="c1"># See https://github.com/pulumi/pulumi/issues/1535.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// JSON parsing helpers for config are not built-in for Go currently.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>The <code>Config</code> object also provides functions to get the value from configuration and mark it as a secret. See [config.getSecret] or [config.requireSecret].  Unlike the <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#method-get">config.get</a> and <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#method-require">config.require</a>, these methods return an <code>Output&lt;T&gt;</code> which holds the underlying value and ensures that it is encrypted when it is being persisted.</p>

<h2 id="components">Components</h2>

<p>A Pulumi <strong>component</strong> is a logical group of resources that contains other components and physical cloud resources. A Pulumi stack is itself a component that contains all top-level components and resources in a program.</p>

<p>To create a new component, either in a top-level program or in a library, create a subclass of <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#ComponentResource">pulumi.ComponentResource</a>. Components provide a way to create reusable abstractions made up of other resources.</p>

<p>Here&rsquo;s a simple component definition:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">class</span> <span class="nx">MyResource</span> <span class="k">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">ComponentResource</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="s2">&#34;pkg:MyResource&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">class</span> <span class="nx">MyResource</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">ComponentResource</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="s2">&#34;pkg:MyResource&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">MyResource</span><span class="p">(</span><span class="n">pulumi</span><span class="o">.</span><span class="n">ComponentResource</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">opts</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;pkg:MyResource&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// ComponentResources are not directly supported in Go currently.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>The call to <code>super</code> registers the component instance with the Pulumi engine. This records the resource in the checkpoint and tracks it across program deployments. Since all resources must have a name, a component constructor should accept a name and pass it to <code>super</code>.</p>

<p>A component must register a namespace, such as <code>pkg:MyResource</code> in the example above. To reduce the potential of name conflicts, this name should contain the package name and resource type, such as <code>aws:lambda:Function</code>. The format <code>&lt;package&gt;:&lt;module&gt;:&lt;type&gt;</code> is typically used, though not currently fully enforced.</p>

<p>Components will often contain child resources. To track this relationship, pass the component instance as the parent when constructing a resource:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">bucket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">s3</span><span class="p">.</span><span class="nx">Bucket</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">-bucket`</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="k">this</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">bucket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">s3</span><span class="p">.</span><span class="nx">Bucket</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">-bucket`</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{</span> <span class="nx">parent</span>: <span class="kt">this</span> <span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">bucket</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">Bucket</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;{name}-bucket&#34;</span><span class="p">,</span> <span class="n">opts</span><span class="o">=</span><span class="n">pulumi</span><span class="o">.</span><span class="n">ResourceOptions</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">bucket</span> <span class="o">:=</span> <span class="nx">s3</span><span class="p">.</span><span class="nf">Bucket</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%s-bucket&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">s3</span><span class="p">.</span><span class="nx">BucketArgs</span><span class="p">{},</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">ResourceOpt</span><span class="p">{</span><span class="nx">Parent</span><span class="p">:</span> <span class="nx">parent</span><span class="p">});</span></code></pre></div>
<p>Components can define their own properties using <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#method-registeroutputs">registerOutputs</a>. The Pulumi engine uses this information to display the logical outputs of the component.  The call to <code>registerOutputs</code> also tells Pulumi that the resource is done registering children and should be considered fully constructed, so it is recommended that this method be called in all components even if no outputs need to be registered.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">this</span><span class="p">.</span><span class="nx">registerOutputs</span><span class="p">({</span>
    <span class="nx">bucketDnsName</span><span class="o">:</span> <span class="nx">bucket</span><span class="p">.</span><span class="nx">bucketDomainName</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="k">this</span><span class="p">.</span><span class="nx">registerOutputs</span><span class="p">({</span>
    <span class="nx">bucketDnsName</span>: <span class="kt">bucket.bucketDomainName</span><span class="p">,</span>
<span class="p">})</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="bp">self</span><span class="o">.</span><span class="n">register_outputs</span><span class="p">({</span>
    <span class="n">bucketDnsName</span><span class="p">:</span> <span class="n">bucket</span><span class="o">.</span><span class="n">bucketDomainName</span>
<span class="p">})</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// ComponentResources are not directly supported in Go currently.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>In addition to the usual resource options, components accept a set of <a href="#providers">providers</a> to use for their child resources. If a component is itself a child of another component, its set of providers is inherited from its parent by default.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">component</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyResource</span><span class="p">(</span><span class="s2">&#34;component&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">providers</span><span class="o">:</span> <span class="p">{</span> <span class="nx">aws</span><span class="o">:</span> <span class="nx">useast1</span><span class="p">,</span> <span class="nx">kubernetes</span><span class="o">:</span> <span class="nx">myk8s</span> <span class="p">}</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">component</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyResource</span><span class="p">(</span><span class="s2">&#34;component&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">providers</span><span class="o">:</span> <span class="p">{</span> <span class="nx">aws</span>: <span class="kt">useast1</span><span class="p">,</span> <span class="nx">kubernetes</span>: <span class="kt">myk8s</span> <span class="p">}</span> <span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">component</span> <span class="o">=</span> <span class="n">MyResource</span><span class="p">(</span><span class="s2">&#34;component&#34;</span><span class="p">,</span> <span class="n">ResourceOptions</span><span class="p">(</span><span class="n">providers</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&#34;aws&#34;</span><span class="p">:</span> <span class="n">useast1</span><span class="p">,</span>
    <span class="s2">&#34;kubernetes&#34;</span><span class="p">:</span> <span class="n">myk8s</span><span class="p">,</span>
<span class="p">}))</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// ComponentResources are not directly supported in Go currently.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>For more information about components, see the <a href="/docs/reference/component-tutorial/">Pulumi Components</a> tutorial.</p>

<h2 id="providers">Providers</h2>

<p>A <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#CustomResource">CustomResource</a> needs an associated resource provider to manage its Create, Read, Update, and Delete (<em>CRUD</em>) operations. This is in contrast to a <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#ComponentResource">ComponentResource</a>, whose logic is authored entirely in a Pulumi program&rsquo;s source language (e.g. Javascript or Python). By default, a <code>CustomResource</code>&rsquo;s provider is determined based on its <a href="#packages">package</a>. This default provider is automatically created by Pulumi, and is configured using its package&rsquo;s <a href="#config">config values</a>. For example, the configuration and program below will create a single EC2 instance in the <code>us-west-2</code> region.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">aws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@pulumi/aws&#34;</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Instance</span><span class="p">(</span><span class="s2">&#34;myInstance&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">instanceType</span><span class="o">:</span> <span class="s2">&#34;t2.micro&#34;</span><span class="p">,</span>
    <span class="nx">ami</span><span class="o">:</span> <span class="s2">&#34;myAMI&#34;</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">aws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@pulumi/aws&#34;</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Instance</span><span class="p">(</span><span class="s2">&#34;myInstance&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">instanceType</span><span class="o">:</span> <span class="s2">&#34;t2.micro&#34;</span><span class="p">,</span>
    <span class="nx">ami</span><span class="o">:</span> <span class="s2">&#34;myAMI&#34;</span><span class="p">,</span>
<span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pulumi_aws</span> <span class="kn">import</span> <span class="n">ec2</span>

<span class="n">instance</span> <span class="o">=</span> <span class="n">ec2</span><span class="o">.</span><span class="n">Instance</span><span class="p">(</span><span class="s2">&#34;myInstance&#34;</span><span class="p">,</span> <span class="n">instance_type</span><span class="o">=</span><span class="s2">&#34;t2.micro&#34;</span><span class="p">,</span> <span class="n">ami</span><span class="o">=</span><span class="s2">&#34;myAMI&#34;</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Providers are not supported in Go currently.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pulumi config <span class="nb">set</span> aws:region us-west-2</code></pre></div>
<p>While this works for the majority of Pulumi programs, some programs may have special requirements (e.g. the ability to deploy into multiple AWS regions simultaneously or to deploy into a Kubernetes cluster created earlier in the program) that require explicitly creating, configuring, and referencing providers. This is typically done by instantiating the relevant package&rsquo;s <code>Provider</code> type and passing it in the options for each <code>CustomResource</code> or <code>ComponentResource</code> that needs to use it. For example, the configuration and program below will create an ACM certificate in the <code>us-east-1</code> region and a load balancer listener in the <code>us-west-2</code> region.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">pulumi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@pulumi/pulumi&#34;</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">aws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@pulumi/aws&#34;</span><span class="p">);</span>

<span class="c1">// Create an AWS provider for the us-east-1 region.
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">useast1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">Provider</span><span class="p">(</span><span class="s2">&#34;useast1&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&#34;us-east-1&#34;</span> <span class="p">});</span>

<span class="c1">// Create an ACM certificate in us-east-1.
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">cert</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">acm</span><span class="p">.</span><span class="nx">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">domainName</span><span class="o">:</span> <span class="s2">&#34;foo.com&#34;</span><span class="p">,</span>
    <span class="nx">validationMethod</span><span class="o">:</span> <span class="s2">&#34;EMAIL&#34;</span><span class="p">,</span>
<span class="p">},</span> <span class="p">{</span> <span class="nx">provider</span><span class="o">:</span> <span class="nx">useast1</span> <span class="p">});</span>

<span class="c1">// Create an ALB listener in the default region that references the ACM certificate created above.
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">elasticloadbalancingv2</span><span class="p">.</span><span class="nx">Listener</span><span class="p">(</span><span class="s2">&#34;listener&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">loadBalancerArn</span><span class="o">:</span> <span class="nx">loadBalancerArn</span><span class="p">,</span>
    <span class="nx">port</span><span class="o">:</span> <span class="mi">443</span><span class="p">,</span>
    <span class="nx">protocol</span><span class="o">:</span> <span class="s2">&#34;HTTPS&#34;</span><span class="p">,</span>
    <span class="nx">sslPolicy</span><span class="o">:</span> <span class="s2">&#34;ELBSecurityPolicy-2016-08&#34;</span><span class="p">,</span>
    <span class="nx">certificateArn</span><span class="o">:</span> <span class="nx">cert</span><span class="p">.</span><span class="nx">arn</span><span class="p">,</span>
    <span class="nx">defaultAction</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">targetGroupArn</span><span class="o">:</span> <span class="nx">targetGroupArn</span><span class="p">,</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;forward&#34;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">})</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">pulumi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@pulumi/pulumi&#34;</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">aws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@pulumi/aws&#34;</span><span class="p">);</span>

<span class="c1">// Create an AWS provider for the us-east-1 region.
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">useast1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">Provider</span><span class="p">(</span><span class="s2">&#34;useast1&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&#34;us-east-1&#34;</span> <span class="p">});</span>

<span class="c1">// Create an ACM certificate in us-east-1.
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">cert</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">acm</span><span class="p">.</span><span class="nx">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">domainName</span><span class="o">:</span> <span class="s2">&#34;foo.com&#34;</span><span class="p">,</span>
    <span class="nx">validationMethod</span><span class="o">:</span> <span class="s2">&#34;EMAIL&#34;</span><span class="p">,</span>
<span class="p">},</span> <span class="p">{</span> <span class="nx">provider</span>: <span class="kt">useast1</span> <span class="p">});</span>

<span class="c1">// Create an ALB listener in the default region that references the ACM certificate created above.
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">elasticloadbalancingv2</span><span class="p">.</span><span class="nx">Listener</span><span class="p">(</span><span class="s2">&#34;listener&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">loadBalancerArn</span>: <span class="kt">loadBalancerArn</span><span class="p">,</span>
    <span class="nx">port</span>: <span class="kt">443</span><span class="p">,</span>
    <span class="nx">protocol</span><span class="o">:</span> <span class="s2">&#34;HTTPS&#34;</span><span class="p">,</span>
    <span class="nx">sslPolicy</span><span class="o">:</span> <span class="s2">&#34;ELBSecurityPolicy-2016-08&#34;</span><span class="p">,</span>
    <span class="nx">certificateArn</span>: <span class="kt">cert.arn</span><span class="p">,</span>
    <span class="nx">defaultAction</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">targetGroupArn</span>: <span class="kt">targetGroupArn</span><span class="p">,</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;forward&#34;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pulumi</span>
<span class="kn">import</span> <span class="nn">pulumi_aws</span> <span class="kn">as</span> <span class="nn">aws</span>

<span class="c1"># Create an AWS provider for the us-east-1 region.</span>
<span class="n">useast1</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">Provider</span><span class="p">(</span><span class="s2">&#34;useast1&#34;</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="s2">&#34;us-east-1&#34;</span><span class="p">)</span>

<span class="c1"># Create an ACM certificate in us-east-1.</span>
<span class="n">cert</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">acm</span><span class="o">.</span><span class="n">Certificate</span><span class="p">(</span><span class="s2">&#34;cert&#34;</span><span class="p">,</span>
    <span class="n">domain_name</span><span class="o">=</span><span class="s2">&#34;foo.com&#34;</span><span class="p">,</span>
    <span class="n">validation_method</span><span class="o">=</span><span class="s2">&#34;EMAIL&#34;</span><span class="p">,</span>
    <span class="n">__opts__</span><span class="o">=</span><span class="n">pulumi</span><span class="o">.</span><span class="n">ResourceOptions</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="n">useast1</span><span class="p">))</span>

<span class="c1"># Create an ALB listener in the default region that references the ACM certificate created above.</span>
<span class="n">listener</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">elasticloadbalancingv2</span><span class="o">.</span><span class="n">Listener</span><span class="p">(</span><span class="s2">&#34;listener&#34;</span><span class="p">,</span>
    <span class="n">load_balancer_arn</span><span class="o">=</span><span class="n">load_balancer_arn</span><span class="p">,</span>
    <span class="n">port</span><span class="o">=</span><span class="mi">443</span><span class="p">,</span>
    <span class="n">protocol</span><span class="o">=</span><span class="s2">&#34;HTTPS&#34;</span><span class="p">,</span>
    <span class="n">ssl_policy</span><span class="o">=</span><span class="s2">&#34;ELBSecurityPolicy-2016-08&#34;</span><span class="p">,</span>
    <span class="n">certificate_arn</span><span class="o">=</span><span class="n">cert</span><span class="o">.</span><span class="n">arn</span><span class="p">,</span>
    <span class="n">default_action</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&#34;target_group_arn&#34;</span><span class="p">:</span> <span class="n">target_group_arn</span><span class="p">,</span>
        <span class="s2">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;forward&#34;</span><span class="p">,</span>
    <span class="p">})</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Providers are not supported in Go currently.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pulumi config <span class="nb">set</span> aws:region us-west-2</code></pre></div>
<p>Component resources also accept a set of providers to use with their child resources. For example, the EC2 instance parented to <code>myResource</code> in the program below will be created in <code>us-east-1</code>, and the Kubernetes pod parented to <code>myResource</code> will be created in the cluster targeted by the &ldquo;test-ci&rdquo; context.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">class</span> <span class="nx">MyResource</span> <span class="k">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">ComponentResource</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Instance</span><span class="p">(</span><span class="s2">&#34;instance&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="k">this</span> <span class="p">});</span>
        <span class="kd">let</span> <span class="nx">pod</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">kubernetes</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">v1</span><span class="p">.</span><span class="nx">Pod</span><span class="p">(</span><span class="s2">&#34;pod&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="k">this</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">useast1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">Provider</span><span class="p">(</span><span class="s2">&#34;useast1&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&#34;us-east-1&#34;</span> <span class="p">});</span>
<span class="kd">let</span> <span class="nx">myk8s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">kubernetes</span><span class="p">.</span><span class="nx">Provider</span><span class="p">(</span><span class="s2">&#34;myk8s&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">context</span><span class="o">:</span> <span class="s2">&#34;test-ci&#34;</span> <span class="p">});</span>
<span class="kd">let</span> <span class="nx">myResource</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyResource</span><span class="p">(</span><span class="s2">&#34;myResource&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">providers</span><span class="o">:</span> <span class="p">{</span> <span class="nx">aws</span><span class="o">:</span> <span class="nx">useast1</span><span class="p">,</span> <span class="nx">kubernetes</span><span class="o">:</span> <span class="nx">myk8s</span> <span class="p">}</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">class</span> <span class="nx">MyResource</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">ComponentResource</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Instance</span><span class="p">(</span><span class="s2">&#34;instance&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">parent</span>: <span class="kt">this</span> <span class="p">});</span>
        <span class="kd">let</span> <span class="nx">pod</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">kubernetes</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">v1</span><span class="p">.</span><span class="nx">Pod</span><span class="p">(</span><span class="s2">&#34;pod&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">parent</span>: <span class="kt">this</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">useast1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">Provider</span><span class="p">(</span><span class="s2">&#34;useast1&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&#34;us-east-1&#34;</span> <span class="p">});</span>
<span class="kd">let</span> <span class="nx">myk8s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">kubernetes</span><span class="p">.</span><span class="nx">Provider</span><span class="p">(</span><span class="s2">&#34;myk8s&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">context</span><span class="o">:</span> <span class="s2">&#34;test-ci&#34;</span> <span class="p">});</span>
<span class="kd">let</span> <span class="nx">myResource</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyResource</span><span class="p">(</span><span class="s2">&#34;myResource&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">providers</span><span class="o">:</span> <span class="p">{</span> <span class="nx">aws</span>: <span class="kt">useast1</span><span class="p">,</span> <span class="nx">kubernetes</span>: <span class="kt">myk8s</span> <span class="p">}</span> <span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">MyResource</span><span class="p">(</span><span class="n">pulumi</span><span class="o">.</span><span class="n">ComponentResource</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">opts</span><span class="p">):</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">ec2</span><span class="o">.</span><span class="n">Instance</span><span class="p">(</span><span class="s2">&#34;instance&#34;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">__opts__</span><span class="o">=</span><span class="n">pulumi</span><span class="o">.</span><span class="n">ResourceOptions</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">pod</span> <span class="o">=</span> <span class="n">kubernetes</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">v1</span><span class="o">.</span><span class="n">Pod</span><span class="p">(</span><span class="s2">&#34;pod&#34;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">__opts__</span><span class="o">=</span><span class="n">pulumi</span><span class="o">.</span><span class="n">ResourceOptions</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>

<span class="n">useast1</span> <span class="o">=</span> <span class="n">aws</span><span class="o">.</span><span class="n">Provider</span><span class="p">(</span><span class="s2">&#34;useast1&#34;</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="s2">&#34;us-east-1&#34;</span><span class="p">)</span>
<span class="n">myk8s</span> <span class="o">=</span> <span class="n">kubernetes</span><span class="o">.</span><span class="n">Provider</span><span class="p">(</span><span class="s2">&#34;myk8s&#34;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s2">&#34;test-ci&#34;</span><span class="p">)</span>
<span class="n">my_resource</span> <span class="o">=</span> <span class="n">MyResource</span><span class="p">(</span><span class="s2">&#34;myResource&#34;</span><span class="p">,</span> <span class="n">pulumi</span><span class="o">.</span><span class="n">ResourceOptions</span><span class="p">(</span><span class="n">providers</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&#34;aws&#34;</span><span class="p">:</span> <span class="n">useast1</span><span class="p">,</span>
    <span class="s2">&#34;kubernetes&#34;</span><span class="p">:</span> <span class="n">myk8s</span><span class="p">,</span>
<span class="p">})</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Providers are not supported in Go currently.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<h2 id="dynamicproviders">Dynamic Providers</h2>

<p>Every <code>CustomResource</code> has a provider associated with it which knows how to create/read/update/delete instances of the custom resource in the backing cloud provider.  This provider can be defined by implementing the Pulumi Resource Provider gRPC interface.  There are generally two approaches to implementing this provider interface:</p>

<ol>
<li>Create a provider binary with the appropriate name and put it on the path, such that it will be loaded to handle CRUD operations from the Pulumi engine on resources from the package it is defined to handle.  For example the <code>pulumi-resource-aws</code> binary will handle resources from the <code>aws</code> package.  This binary can be authored in any language, but must be authored and distributed out of band of a Pulumi program.</li>
<li>Define an implementation of the Provider interface directly within your Pulumi program, just for use within that program.</li>
</ol>

<p>The former is used for most common Pulumi providers like AWS and Kubernetes.  The latter is a concept called Dynamic Providers, which provide a flexible approach to defining custom resource types directly within the source code of your Pulumi program.</p>

<p>You should consider implementing a dynamic provider in a few cases:</p>

<ol>
<li>You need to manage a cloud resource for which there is not yet a published Pulumi Provider, but you expect to only use it from within one program.  (If you expect to use it from many programs, and in many languages, implementing a full provider is preferrable.)</li>
<li>You need to integrate custom logic into the deployment workflow that runs exactly during one or more of the create, read, update or delete steps - instead of running &ldquo;always&rdquo; as part of a normal Pulumi program.</li>
</ol>

<p>Dynamic Providers are defined by first implementing the <code>pulumi.dynamic.ResourceProvider</code> interface, including the <code>create</code>, <code>read</code>, <code>update</code> and <code>delete</code> operations for your resource, as well as <code>check</code> and <code>diff</code>.  Default implementations are provided for everything except <code>create</code>, so a minimal implementation could look like:</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">const</span> <span class="nx">myprovider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kr">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">inputs</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s2">&#34;foo&#34;</span><span class="p">,</span> <span class="nx">outs</span><span class="o">:</span> <span class="p">{}};</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">const</span> <span class="nx">myprovider</span>: <span class="kt">pulumi.dynamic.ResourceProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">inputs</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s2">&#34;foo&#34;</span><span class="p">,</span> <span class="nx">outs</span><span class="o">:</span> <span class="p">{}};</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Dynamic Providers are not supported in Python currently.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="o">//</span> <span class="nx">Dynamic</span> <span class="nx">Providers</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">supported</span> <span class="nx">in</span> <span class="nx">Go</span> <span class="nx">currently</span><span class="p">.</span></code></pre></div>
<p>This resource provider is then used to create a new kind of custom resource by inheriting from the <code>pulumi.dynamic.Resource</code> base class (a subclass of <code>pulumi.CustomResource</code>).</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">class</span> <span class="nx">MyResource</span> <span class="k">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">myprovider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">class</span> <span class="nx">MyResource</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">props</span><span class="o">:</span> <span class="p">{},</span> <span class="nx">opts?</span>: <span class="kt">pulumi.CustomResourceOptions</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">myprovider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Dynamic Providers are not supported in Python currently.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="o">//</span> <span class="nx">Dynamic</span> <span class="nx">Providers</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">supported</span> <span class="nx">in</span> <span class="nx">Go</span> <span class="nx">currently</span><span class="p">.</span></code></pre></div>
<p>We can now create instances of the new <code>MyResource</code> resource kind in our program with <code>new MyRresource(&quot;name&quot;, args)</code>.  When we do so, if Pulumi determines the resource has not yet been created, it will call the <code>create</code> method on the resource provider interface.  If another Pulumi deployment happens and the resource already exists, Pulumi will call the <code>diff</code> method to determine whether a change can be made in place or whether a replacement is needed.  If a replacement is needed, Pulumi will call <code>create</code> for the new resource and then <code>delete</code> for the old resource.  If no repacement is needed, Pulumi will call <code>update</code>.  In all cases, before doing anything else, Pulumi will call the <code>check</code> method with the resource arguments to give the provider a chance to validate that the arguments are valid.  And finally, if Pulumi needs to read an existing resource without managing it directly, it will call <code>read</code>.</p>

<blockquote>
<p><em>Note</em>: Dynamic Providers are a flexible and low-level mechanism to plug arbitrary code directly into the deployment process.  Whereas most code in a Pulumi program runs as part of constructing the desired state of resources (the &ldquo;resource graph&rdquo;), the code inside the dynamic provider resource provider interface implementations (<code>create</code>, <code>update</code>, etc.) runs instead during resource provisioning (while the resource graph is being turned into a set of CRUD operations scheduled against the cloud providers).  In fact, these two phases of execution actually run in completely seperate processes.  The construction of a <code>new MyResource</code> happens inside the JavaScript/Python/Go process that&rsquo;s running your Pulumi program.  But your implementations of <code>create</code> or <code>update</code> are executed by a special resource provider binary called <code>pulumi-resource-pulumi-nodejs</code>.  This binary is what actually implements the Pulumi resource provider gRPC interface and speaks directly to the Pulumi engine. Because your implementation of the resource provider interface must be used by a different process, potentialy at a different point in time, dynamic providers are built on top of the same <a href="/docs/reference/serializing-functions/">function serialization</a> that is used for turning callbacks into AWS Lambdas or Google Cloud Functions.  Because of this serialization, there are some limits on what can be done inside the implementation of the resource provider interface, which you can read more about in the function serialization documentation.</p>
</blockquote>

<h3 id="dynamic-resource-inputs">Dynamic Resource Inputs</h3>

<p>A dynamic provider interfaces with other components via subclasses of <code>pulumi.dynamic.Resource</code>. The inputs to a dynamic provider&rsquo;s implementation are provided via a instantiation of such a subclass; this is the <code>props</code> parameter in the constructor in the example below. Any properties you set in the <code>props</code> object will be passed to your <code>pulumi.dynamic.ResourceProvider</code> functions as the <code>inputs</code> where appropriate.</p>

<blockquote>
<p>For statically typed languages, you can get rich type information for the inputs declaring an input type to make it easy to use your custom resource.</p>
</blockquote>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">class</span> <span class="nx">MyResource</span> <span class="k">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">myprovider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">interface</span> <span class="nx">MyResourceInputs</span> <span class="p">{</span>
    <span class="nx">myStringProp</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nx">myBoolProp</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">MyResource</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">props</span>: <span class="kt">MyResourceInputs</span><span class="p">,</span> <span class="nx">opts?</span>: <span class="kt">pulumi.CustomResourceOptions</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">myprovider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Dynamic Providers are not supported in Python currently.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="o">//</span> <span class="nx">Dynamic</span> <span class="nx">Providers</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">supported</span> <span class="nx">in</span> <span class="nx">Go</span> <span class="nx">currently</span><span class="p">.</span></code></pre></div>
<h3 id="resource-provider-interface">Resource Provider Interface</h3>

<p>Implementing the <code>pulumi.dynamic.ResourceProvider</code> interface requires implementing a subset of the methods below. Each of these methods may be asynchronous, and most implementations of these methods will perform network I/O to provision resources in a backing cloud provider or other resource model. There are several important contracts between a dynamic provider and the Pulumi CLI that inform when these methods are called and with what data.</p>

<p>Though the input properties passed to a <code>pulumi.dynamic.Resource</code> instance will usually be of type <code>pulumi.Input&lt;T&gt;</code> in order to compose well with other Pulumi resources, the dynamic provider&rsquo;s functions are invoked with the fully resolved input values. Strong typing for the inputs to your provider&rsquo;s functions can help clarify this; you can achieve this by creating a second interface with the same properties as your resource&rsquo;s inputs, but with fully unwrapped types.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="c1">// Exported type.
</span><span class="c1"></span><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">MyResourceInputs</span> <span class="p">{</span>
    <span class="nx">myStringProp</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nx">myBoolProp</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="c1">// Non-exported type used by the provider functions.
</span><span class="c1">// This interface contains the same inputs, but as un-wrapped types.
</span><span class="c1"></span><span class="kr">interface</span> <span class="nx">MyResourceProviderInputs</span> <span class="p">{</span>
    <span class="nx">myStringProp</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">myBoolProp</span>: <span class="kt">boolean</span><span class="p">;</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">MyResourceProvider</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">ResourceProvider</span> <span class="p">{</span>
    <span class="nx">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">inputs</span>: <span class="kt">MyResourceProviderInputs</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">CreateResult</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>

    <span class="nx">async</span> <span class="nx">diff</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">oldOutputs</span>: <span class="kt">MyResourceProviderOutputs</span><span class="p">,</span> <span class="nx">newInputs</span>: <span class="kt">MyResourceProviderInputs</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">DiffResult</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">MyResource</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">props</span>: <span class="kt">MyResourceInputs</span><span class="p">,</span> <span class="nx">opts?</span>: <span class="kt">pulumi.CustomResourceOptions</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">myprovider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Dynamic Providers are not supported in Python currently.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="o">//</span> <span class="nx">Dynamic</span> <span class="nx">Providers</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">supported</span> <span class="nx">in</span> <span class="nx">Go</span> <span class="nx">currently</span><span class="p">.</span></code></pre></div>
<h5 id="check-olds-news"><code>check(olds, news)</code></h5>

<p>Check is invoked before any other methods, and is passed the resolved input properties that were originally provided to the resource constructor by the user.  It is passed both the old input properties that were stored in the statefile after the previous update to the resource, as well as the new inputs from the current deployment.  It has two jobs: (1) to verify that the inputs (particularly the news) are valid and if not to return useful error messages and (2) to return a set of checked inputs.  The inputs returned from the call to <code>check</code> will be the inputs that the Pulumi engine uses for all further processing of the resource, including being the values that will be passed back in to <code>diff</code>, <code>create</code>, <code>update</code>, etc.  In many cases, the <code>news</code> can be returned dirctly as the checked inputs.  But in cases where the provider needs to populate defaults, or do some normalization on values, it may want to do that in the <code>check</code> method so that this data is complete and normalized prior to being passed into other methods.</p>

<h5 id="create-inputs"><code>create(inputs)</code></h5>

<p>Create is invoked when the resource name (URN) of the resoruce created by the user is not found in the existing state of the deployment.  The engine passes the provider the checked inputs returned from the call to <code>check</code>.  The create method is expected to do the work in the backing cloud provider to create the requested resource.  It then returns two pieces of data: (1) an <code>id</code> that can uniquely identify the resource in the backing provider for ater lookups and (2) a set of <code>outputs</code> from the backing provider that should be returned to the user code as properties on the <code>CustomResource</code> object, and stored into the checkpoint file.  If an error occurs, an exception can be thrown from the <code>create</code> method to return this error to the user.</p>

<h5 id="diff-id-olds-news"><code>diff(id, olds, news)</code></h5>

<p>Diff is invoked when the resource name (URN) of the resoruce created by the user is found in the existing state of the deployment. This means the resource already exists, and will need to be either updated or replaced.  The <code>diff</code> method is passed the <code>id</code> of the resource (as returned by <code>create</code>) as well as the old outputs from the checkpoint file (values returned from a previous call to either <code>create</code> or <code>update</code>).  It is also passed the new checked inputs from the current deployment.  It returns four things (all optional):</p>

<ul>
<li><code>changes</code>: <code>true</code> if the provider believes there is a difference between the <code>olds</code> and <code>news</code> and wants to do an <code>update</code> or <code>replace</code> to affect this change.</li>
<li><code>replaces</code>: An array of property names that have changed that should force a replacement.  Returning a non-zero length array here will tell the Pulumi engine to scheduled a replacement instead of an update, which might involve downtime, so this should only be used when a diff requested by the user cannot be implemented as an in-place update on the backing cloud provider.</li>
<li><code>stables</code>: An array of property names that are known to not change between updates.  Pulumi will use this information to allow some <code>apply</code> calls on [Outputs]() to be processed during <code>previews</code> because it knows that the values of these will stay the same during an update.</li>
<li><code>deleteBeforeReplace</code>: <code>true</code> if the proposed replacements require deleteing the existing resource before creating the new one.  By default Pulumi will try to create the new resource before deleting the old one to avoid downtime.
If an error occurs, an exception can be thrown from the <code>diff</code> method to return this error to the user.</li>
</ul>

<h5 id="update-id-olds-news"><code>update(id, olds, news)</code></h5>

<p>Update is invoked if the call to <code>diff</code> indicates replacement is not needed.  It is passed the the <code>id</code> of the resource (as returned by <code>create</code>) as well as the old outputs from the checkpoint file (values returned from a previous call to either <code>create</code> or <code>update</code>). It is also passed the new checked inputs from the current deployment.  The update method is expected to do the work in the backing cloud provider to update an existing resource to the new desired state.  It then returns a new set of <code>outputs</code> from the backing provider that should be returned to the user code as properties on the <code>CustomResource</code> object, and stored into the checkpoint file.  If an error occurs, an exception can be thrown from the <code>create</code> method to return this error to the user.</p>

<h5 id="delete-id-props"><code>delete(id, props)</code></h5>

<p>Delete is invoked if the resource name (URN) exists in the previous state but not in the new desired state, or if a replacement is needed.  It is passed the the <code>id</code> of the resource (as returned by <code>create</code>) as well as the old outputs from the checkpoint file (values returned from a previous call to either <code>create</code> or <code>update</code>).  It is expected to delete the corresponding resource from the backing cloud provider.  Nothing needs to be returned.  If an error occurs, an exception can be thrown from the <code>create</code> method to return this error to the user.</p>

<h5 id="read-id-props"><code>read(id, props)</code></h5>

<p>Read is invoked when the Pulumi engine needs to get data about a resource that it is not managed by Pulumi.  It is passed the the <code>id</code> of the resource as tracked in the backing cloud provider as well as an optional bag of additional properties to use to disambiguate the request if needed. The <code>read</code> method is execpted to lookup the requested resource, and if found return the canonical <code>id</code> and output properties of this resource.  If an error occurs, an exception can be thrown from the <code>create</code> method to return this error to the user.</p>

<h3 id="dynamic-resource-outputs">Dynamic Resource Outputs</h3>

<p>Any outputs can be returned by your <code>create</code> function in the <code>outs</code> property of <code>pulumi.dynamic.CreateResult</code>.</p>

<blockquote>
<p>The following only applies to <strong>statically typed languages</strong>.</p>
</blockquote>

<p>If you need to access the outputs of your custom resource outside it with strong typing support, then declare each output property returned in the <code>outs</code> property by your <code>create</code> function as a class member of the <code>pulumi.dynamic.Resource</code> itself. For example, in TypeScript, these must be declared as <code>public readonly</code> class members in your <code>pulumi.dynamic.Resource</code> class. These class members must also have the type <code>pulumi.Output&lt;T&gt;</code>.</p>

<p><strong>Note</strong> that the name of the class member must match the names of the output properties as returned by the <code>create</code> function.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="p">...</span>

<span class="kr">interface</span> <span class="nx">MyResourceProviderOutputs</span> <span class="p">{</span>
    <span class="nx">myNumberOutput</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">myStringOutput</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">MyResourceProvider</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">ResourceProvider</span> <span class="p">{</span>
    <span class="nx">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">inputs</span>: <span class="kt">MyResourceProviderInputs</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">CreateResult</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="p">...</span>
        <span class="c1">// Values are for an example only.
</span><span class="c1"></span>        <span class="k">return</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s2">&#34;...&#34;</span><span class="p">,</span> <span class="nx">outs</span><span class="o">:</span> <span class="p">{</span> <span class="nx">myNumberOutput</span>: <span class="kt">12</span><span class="p">,</span> <span class="nx">myStringOutput</span><span class="o">:</span> <span class="s2">&#34;some value&#34;</span> <span class="p">}};</span>
    <span class="p">}</span>

    <span class="nx">async</span> <span class="nx">diff</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">oldOutputs</span>: <span class="kt">MyResourceProviderOutputs</span><span class="p">,</span> <span class="nx">newInputs</span>: <span class="kt">MyResourceProviderInputs</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">DiffResult</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kr">class</span> <span class="nx">MyResource</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="kr">public</span> <span class="nx">readonly</span> <span class="nx">myStringOutput</span>: <span class="kt">pulumi.Output</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="kr">public</span> <span class="nx">readonly</span> <span class="nx">myNumberOutput</span>: <span class="kt">pulumi.Output</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">props</span>: <span class="kt">MyResourceInputs</span><span class="p">,</span> <span class="nx">opts?</span>: <span class="kt">pulumi.CustomResourceOptions</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">myprovider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Dynamic Providers are not yet supported in Python.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="o">//</span> <span class="nx">Dynamic</span> <span class="nx">Providers</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">yet</span> <span class="nx">supported</span> <span class="nx">in</span> <span class="nx">Go</span><span class="p">.</span></code></pre></div>
<h3 id="dynamic-provider-examples">Dynamic Provider Examples</h3>

<h4 id="example-random">Example: Random</h4>

<p>This example highlights using dynamic providers to run some code only when a resource is created, and then to store the results of that in the checkpoint file so that this value is maintained across deployments of the resource.  In this case, there is no &ldquo;backing cloud provider&rdquo;, just the checkpoint file serialization that persists data.  The result is a provider similar to the one provided in <code>@pulumi/random</code> (although that library has many more flags than this simple example):</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">pulumi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@pulumi/pulumi&#34;</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;crypto&#34;</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">randomprovider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kr">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">inputs</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">randomBytes</span><span class="p">(</span><span class="mi">16</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">),</span> <span class="nx">outs</span><span class="o">:</span> <span class="p">{}};</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nx">Random</span> <span class="k">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">randomprovider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">Random</span> <span class="o">=</span> <span class="nx">Random</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">pulumi</span> <span class="nx">from</span> <span class="s2">&#34;@pulumi/pulumi&#34;</span><span class="p">;</span>
<span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">crypto</span> <span class="nx">from</span> <span class="s2">&#34;crypto&#34;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">randomprovider</span>: <span class="kt">pulumi.dynamic.ResourceProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">inputs</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">crypto.randomBytes</span><span class="p">(</span><span class="mi">16</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">),</span> <span class="nx">outs</span><span class="o">:</span> <span class="p">{}};</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kr">class</span> <span class="nx">Random</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">opts?</span>: <span class="kt">pulumi.CustomResourceOptions</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">randomprovider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Dynamic Providers are not supported in Python currently.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="o">//</span> <span class="nx">Dynamic</span> <span class="nx">Providers</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">supported</span> <span class="nx">in</span> <span class="nx">Go</span> <span class="nx">currently</span><span class="p">.</span></code></pre></div>
<h4 id="example-github-labels-rest-api">Example: GitHub Labels REST API</h4>

<p>This example highlights making REST API calls to some backing provider (in this case the GitHub API) to perform CRUD operations.  Because the resource provider method implementations will be serialized and used in a different process, we keep all the work to initialize the REST client and make calls to it local to each function.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">pulumi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@pulumi/pulumi&#34;</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">Octokit</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@octokit/rest&#34;</span><span class="p">);</span>

<span class="c1">// Set this value before creating an instance to configure the authentication token to use for deployments
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">auth</span> <span class="o">=</span> <span class="s2">&#34;token invalid&#34;</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">setAuth</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span> <span class="nx">auth</span> <span class="o">=</span> <span class="nx">token</span><span class="p">;</span> <span class="p">}</span>

<span class="k">const</span> <span class="nx">githubLabelProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kr">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">inputs</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">const</span> <span class="nx">ocktokit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ocktokit</span><span class="p">({</span><span class="nx">auth</span><span class="p">});</span>
        <span class="k">const</span> <span class="nx">label</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">ocktokit</span><span class="p">.</span><span class="nx">issues</span><span class="p">.</span><span class="nx">createLabel</span><span class="p">(</span><span class="nx">inputs</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">label</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="nx">outs</span><span class="o">:</span> <span class="nx">label</span><span class="p">.</span><span class="nx">data</span> <span class="p">};</span>
    <span class="p">},</span>
    <span class="kr">async</span> <span class="nx">update</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">olds</span><span class="p">,</span> <span class="nx">news</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">const</span> <span class="nx">ocktokit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ocktokit</span><span class="p">({</span><span class="nx">auth</span><span class="p">});</span>
        <span class="k">const</span> <span class="nx">label</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">ocktokit</span><span class="p">.</span><span class="nx">issues</span><span class="p">.</span><span class="nx">updateLabel</span><span class="p">({</span> <span class="p">...</span><span class="nx">news</span><span class="p">,</span> <span class="nx">current_name</span><span class="o">:</span> <span class="nx">olds</span><span class="p">.</span><span class="nx">name</span> <span class="p">});</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">outs</span><span class="o">:</span> <span class="nx">label</span><span class="p">.</span><span class="nx">data</span> <span class="p">};</span>
    <span class="p">},</span>
    <span class="kr">async</span> <span class="k">delete</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">const</span> <span class="nx">ocktokit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ocktokit</span><span class="p">({</span><span class="nx">auth</span><span class="p">});</span>
        <span class="kr">await</span> <span class="nx">ocktokit</span><span class="p">.</span><span class="nx">issues</span><span class="p">.</span><span class="nx">deleteLabel</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nx">Label</span> <span class="k">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">githubLabelProvider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">Label</span> <span class="o">=</span> <span class="nx">Label</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">pulumi</span> <span class="nx">from</span> <span class="s2">&#34;@pulumi/pulumi&#34;</span><span class="p">;</span>
<span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">Ocktokit</span> <span class="nx">from</span> <span class="s2">&#34;@octokit/rest&#34;</span><span class="p">;</span>

<span class="c1">// Set this value before creating an instance to configure the authentication token to use for deployments
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">auth</span> <span class="o">=</span> <span class="s2">&#34;token invalid&#34;</span><span class="p">;</span>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">setAuth</span><span class="p">(</span><span class="nx">token</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span> <span class="nx">auth</span> <span class="o">=</span> <span class="nx">token</span><span class="p">;</span> <span class="p">}</span>

<span class="kr">export</span> <span class="kr">interface</span> <span class="nx">LabelResourceInputs</span> <span class="p">{</span>
    <span class="nx">owner</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nx">repo</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nx">name</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nx">color</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nx">description?</span>: <span class="kt">pulumi.Input</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">LabelInputs</span> <span class="p">{</span>
    <span class="nx">owner</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">repo</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">color</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">description?</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">githubLabelProvider</span>: <span class="kt">pulumi.dynamic.ResourceProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">inputs</span>: <span class="kt">LabelInputs</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">ocktokit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ocktokit</span><span class="p">({</span><span class="nx">auth</span><span class="p">});</span>
        <span class="kr">const</span> <span class="nx">label</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">ocktokit</span><span class="p">.</span><span class="nx">issues</span><span class="p">.</span><span class="nx">createLabel</span><span class="p">(</span><span class="nx">inputs</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">label.data.id.toString</span><span class="p">(),</span> <span class="nx">outs</span>: <span class="kt">label.data</span> <span class="p">};</span>
    <span class="p">},</span>
    <span class="nx">async</span> <span class="nx">update</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">olds</span>: <span class="kt">LabelInputs</span><span class="p">,</span> <span class="nx">news</span>: <span class="kt">LabelInputs</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">ocktokit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ocktokit</span><span class="p">({</span><span class="nx">auth</span><span class="p">});</span>
        <span class="kr">const</span> <span class="nx">label</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">ocktokit</span><span class="p">.</span><span class="nx">issues</span><span class="p">.</span><span class="nx">updateLabel</span><span class="p">({</span> <span class="p">...</span><span class="nx">news</span><span class="p">,</span> <span class="nx">current_name</span>: <span class="kt">olds.name</span> <span class="p">});</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">outs</span>: <span class="kt">label.data</span> <span class="p">};</span>
    <span class="p">},</span>
    <span class="nx">async</span> <span class="k">delete</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">props</span>: <span class="kt">LabelInputs</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">ocktokit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ocktokit</span><span class="p">({</span><span class="nx">auth</span><span class="p">});</span>
        <span class="nx">await</span> <span class="nx">ocktokit</span><span class="p">.</span><span class="nx">issues</span><span class="p">.</span><span class="nx">deleteLabel</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kr">class</span> <span class="nx">Label</span> <span class="kr">extends</span> <span class="nx">pulumi</span><span class="p">.</span><span class="nx">dynamic</span><span class="p">.</span><span class="nx">Resource</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">args</span>: <span class="kt">LabelResourceInputs</span><span class="p">,</span> <span class="nx">opts?</span>: <span class="kt">pulumi.CustomResourceOptions</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">githubLabelProvider</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Dynamic Providers are not supported in Python currently.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="o">//</span> <span class="nx">Dynamic</span> <span class="nx">Providers</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">supported</span> <span class="nx">in</span> <span class="nx">Go</span> <span class="nx">currently</span><span class="p">.</span></code></pre></div>
<h2 id="packages">Packages</h2>

<p>Pulumi packages are normal NPM or Python packages. They transitively depend on <code>@pulumi/pulumi</code> which defines how resources created by a Pulumi program will be communicated to the Pulumi engine.  This ability to register resources with the Pulumi engine is the only difference between a Pulumi package and any other NPM package.</p>

<p>Some Pulumi packages have a dependency on a <a href="/docs/reference/cli/pulumi_plugin/">Resource Provider plugin</a> which contains the implementation for how to Create, Read, Update and Delete resources defined by the package.  The <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#CustomResource">pulumi.CustomResource</a> base class is used to connect a JavaScript resource class with the resource provider it depends on for resource management.  Packages like <a href="/docs/reference/pkg/nodejs/pulumi/aws/">@pulumi/aws</a> and <a href="/docs/reference/pkg/nodejs/pulumi/kubernetes/">@pulumi/kubernetes</a> define resources, such as <code>aws.ec2.Instance</code>, <code>kubernetes.Pod</code>, which are managed by the AWS and Kubernetes resource provider plugins. Packages such as <a href="/docs/reference/pkg/nodejs/pulumi/cloud/">@pulumi/cloud</a> and <a href="/docs/reference/pkg/nodejs/pulumi/awsx/">@pulumi/awsx</a> contain only higher-level component resources, which are not managed by a resource provider plugin.</p>

<h2 id="runtime">Runtime code</h2>

<p>You can create libraries and components that allow the caller to pass in JavaScript callbacks to invoke at runtime. For example, you can create an AWS Lambda function (or an Azure Function) by providing a JavaScript callback to be used as its implementation.</p>

<div class="mdl-tabs langtab-tabs">
    <div class="mdl-tabs__tab-dir langtab-tabstrip">
        <a class="mdl-tabs__tab langtab is-active">JavaScript</a>
        <a class="mdl-tabs__tab langtab">TypeScript</a>
        
        <a class="mdl-tabs__tab langtab">Python</a>
        <a class="mdl-tabs__tab langtab">Go</a>
        
    </div>
</div>


<div class="clearfix"></div>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">bucket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">s3</span><span class="p">.</span><span class="nx">Bucket</span><span class="p">(</span><span class="s2">&#34;mybucket&#34;</span><span class="p">);</span>
<span class="nx">bucket</span><span class="p">.</span><span class="nx">onObjectCreated</span><span class="p">(</span><span class="s2">&#34;onObject&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// This is the code that will be run when the Lambda is invoked (any time an object is added to the bucket).
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">ev</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">let</span> <span class="nx">bucket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">s3</span><span class="p">.</span><span class="nx">Bucket</span><span class="p">(</span><span class="s2">&#34;mybucket&#34;</span><span class="p">);</span>
<span class="nx">bucket</span><span class="p">.</span><span class="nx">onObjectCreated</span><span class="p">(</span><span class="s2">&#34;onObject&#34;</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">ev</span>: <span class="kt">aws.s3.BucketEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// This is the code that will be run when the Lambda is invoked (any time an object is added to the bucket).
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">ev</span><span class="p">));</span>
<span class="p">});</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Runtime code provided via callbacks are not supported in Python currently.</span>
<span class="c1">#</span>
<span class="c1"># See https://github.com/pulumi/pulumi/issues/1535.</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Runtime code provided via callbacks are not supported in Go currently.
</span><span class="c1">//
</span><span class="c1"></span><span class="o">//</span> <span class="nx">See</span> <span class="nx">https</span><span class="p">:</span><span class="o">//</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">pulumi</span><span class="o">/</span><span class="nx">issues</span><span class="o">/</span><span class="mf">1614.</span></code></pre></div>
<p>Libraries which use JavaScript callbacks as inputs to be provided as source text to resource construction (like the Lambda that is created by the <code>onObjectCreated</code> function in the example above) are built on top of the <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/runtime/#serializeFunction">pulumi.runtime.serializeFunction</a> API, which takes as input a JavaScript <code>Function</code> object, and returns a <code>Promise</code> that contains the serialized form of that function.</p>

<p>When serializing a function to text, the following steps are taken:</p>

<ol>
<li>Any captured variables referenced by the function are evaluated when the function is serialized.</li>
<li>The values of those variables are serialized.</li>
<li>When the values are objects, all properties and prototype chains are serialized.  When the values are functions, those functions are serialized by following these same steps.</li>
</ol>

<p>For more details see the docs on <a href="/docs/reference/serializing-functions/">serializing functions</a>.</p>

<h2 id="design-guidelines">Design Guidelines</h2>

<h3 id="outputinstance-apply">OutputInstance.apply</h3>

<p>It is recommended that the <code>func</code> argument of <a href="/docs/reference/pkg/nodejs/pulumi/pulumi/#OutputInstance-apply">OutputInstance.apply</a> not create any resources, as doing so can lead to the results of <code>pulumi preview</code> being wrong, as the <code>apply</code> callback will not get run during a preview (because the real outputs values aren&rsquo;t yet known until the resources are deployed), and therefore any resources created in the callback will not be seen during the <code>preview</code>.</p>

<p>However, you may have a scenario in which the actual value, such as an array of Outputs, is needed to create a resource but is not determined until the time of <code>pulumi update</code> and after part of the deployment has already happened (e.g. an array of <a href="/docs/reference/pkg/nodejs/pulumi/aws/route53/#Zone-nameServers">Nameservers</a>).  In that case, Pulumi lets you express this within the <code>apply</code>, but be cautioned that the preview may not include some changes to resources that are created (or later removed) from within the <code>apply</code>.</p>

<!-- MARKDOWN LINKS -->

<!-- END LINKS -->

            </div>
        </div>
    </div>

        </main>

        <nav class="footer bg-purple-700 py-8 px-8 md:px-0">
    <div class="container mx-auto">
        <footer>
            <div class="md:flex items-top justify-between flex-wrap">

                <div class="mb-6 md:w-4/12">
                    <a class="block mt-2" href="/">
                        <img class="h-10 opacity-50" src="/images/logo/logo-white.svg" alt="Pulumi logo">
                    </a>
                    <a class="inline-block my-4 opacity-50 text-white text-lg" href="mailto:team@pulumi.com">team@pulumi.com</a>
                    <ul class="flex inline-items text-blue-300 text-2xl">
                        <li class="mr-4"><a class="hover:text-blue-200" href="https://twitter.com/pulumicorp" target="_blank"><i class="fab fa-twitter"></i></a></li>
                        <li class="mr-4"><a class="hover:text-blue-200" href="https://www.linkedin.com/company/pulumi/" target="_blank"><i class="fab fa-linkedin"></i></a></li>
                        <li class="mr-4"><a class="hover:text-blue-200" href="https://github.com/pulumi/" target="_blank"><i class="fab fa-github"></i></a></li>
                        <li class="mr-4"><a class="hover:text-blue-200" href="https://www.youtube.com/channel/UC2Dhyn4Ev52YSbcpfnfP0Mw" target="_blank"><i class="fab fa-youtube"></i></a></li>
                        <li><a class="hover:text-blue-200" href="https://slack.pulumi.io/" target="_blank"><i class="fab fa-slack-hash"></i></a></li>
                    </ul>
                </div>

                <div class="flex flex-wrap items-top md:w-8/12">
                    <ul class="my-4 text-white w-1/2 md:w-3/12">
                        <li class="mb-4"><a href="/containers/">Containers</a></li>
                        <li class="mb-4"><a href="/serverless/">Serverless</a></li>
                        <li class="mb-4"><a href="/docs/reference/tutorials/aws/tutorial-ec2-webserver/">Infrastructure</a></li>
                        <li class="mb-4"><a href="/kubernetes/">Kubernetes</a></li>
                    </ul>
                    <ul class="my-4 text-white w-1/2 md:w-3/12">
                        <li class="mb-4"><a href="/docs/reference/install/">Install</a></li>
                        <li class="mb-4"><a href="/docs/quickstart/">Get Started</a></li>
                        <li class="mb-4"><a href="/docs/reference/">Documentation</a></li>
                        <li class="mb-4"><a href="/docs/reference/pkg/">APIs</a></li>
                    </ul>
                    <ul class="my-4 text-white w-1/2 md:w-3/12">
                        <li class="mb-4"><a href="/docs/quickstart/aws/">AWS</a></li>
                        <li class="mb-4"><a href="/docs/quickstart/azure/">Azure</a></li>
                        <li class="mb-4"><a href="/docs/quickstart/gcp/">Google Cloud</a></li>
                        <li class="mb-4"><a href="/docs/quickstart/kubernetes/">Kubernetes</a></li>
                        <li class="mb-4"><a href="/docs/quickstart/cloudfx/">Cloud Framework</a></li>
                        <li class="mb-4"><a href="/docs/reference/clouds/openstack/">OpenStack</a></li>
                    </ul>
                    <ul class="my-4 text-white w-1/2 md:w-3/12">
                        <li class="mb-4"><a href="/about/">About Us</a></li>
                        <li class="mb-4"><a href="/contact/">Contact Us</a></li>
                        <li class="mb-4"><a href="/support/">Support</a></li>
                        <li class="mb-4"><a href="/careers/">Careers</a></li>
                    </ul>
                </div>
            </div>

            <div class="text-white opacity-75 text-sm lg:flex items-center border-t border-purple-500 mt-4 pt-4">
                
                <p class="md:w-4/12">&copy; 2019 Pulumi. All rights reserved.</p>

                <ul class="md:w-8/12">
                    
                        <li class="inline mr-2 lg:mr-4"><a href="/trademark/">Trademark Usage</a></li>
                    
                        <li class="inline mr-2 lg:mr-4"><a href="/acceptable-use/">Acceptable Use Policy</a></li>
                    
                        <li class="inline mr-2 lg:mr-4"><a href="/terms-and-conditions/">Terms &amp; Conditions</a></li>
                    
                        <li class="inline mr-2 lg:mr-4"><a href="/privacy/">Privacy Policy</a></li>
                    
                        <li class="inline mr-2 lg:mr-4"><a href="/professional-services-agreement/">Professional Services Agreement</a></li>
                    
                </ul>
            </div>
        </footer>
    </div>
</nav>

        <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>











    




<script src="/js/bundle.min.8d935315b94bf6e77843b9c51ebc10238af740294e751f49b183b5d1e27a1c27.js" integrity="sha256-jZNTFblL9ud4Q7nFHrwQI4r3QClOdR9JsYO10eJ6HCc="></script>

    </body>
</html>
