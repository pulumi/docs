# We use this to fully qualify certain URLs (such as og:image).
# Ideally, this would vary based on the environment (e.g. http://0.0.0.0:4000
# for local dev, https://staging.pulumi.io for staging, and https://pulumi.io
# for production), but there currently isn't a need to do that for the few
# places this is used, so we always use the production URL.
# We're deliberately using a custom variable instead of `url` as other things
# will make use of `url` if it is set, such as the URLs generated by
# jekyll-redirect-from, and we don't need those to be fully qualified.
pulumi_url: https://pulumi.io

sass:
    style: compressed

plugins:
  - jekyll-octicons
  - kramdown
  - jekyll-include-cache # used for recursive loop in _includes/tree.html
  - jekyll-redirect-from # for 301 redirects
  - jekyll-relative-links # to convert internal MD links to HTML
  - jekyll-optional-front-matter # for Markdown without front matter (e.g., CLI reference)

markdown: kramdown
kramdown:
  parse_block_html: false

optional_front_matter:
  remove_originals: true

relative_links:
  enabled: true
  collections: true

github:
  repository_url: https://github.com/pulumi/docs
  branch: master

# Files to not include when building.
exclude:
  - .gitattributes
  - .gitignore
  - .travis.yml
  - CODE-OF-CONDUCT.md
  - CONTRIBUTING.md
  - Dockerfile
  - infrastructure
  - Gemfile
  - Gemfile.lock
  - Makefile
  - node_modules
  - package.json
  - README.md
  - scripts
  - tools
  - vendor
  - yarn.lock

# search-index.json is generated as part of `make build`. However, running `make serve` will delete
# all files under /_site that aren't specified here. We specify it here to avoid deleting a previously
# generated index when using `make serve`.
keep_files:
  - search-index.json

# Tables of contents, stored in the _data folder, that control the sidebar nav
# To add a new entry to the table of contents, create a new doc in the appropriate folder,
# then add an entry in _data/<toc>.yaml. 
# Ensure that the ordering matches the logical flow that customers expect
tocs:
  - home
  - install
  - quickstart
  - tour
  - reference
  - aws

# By default, use a `default_toc` layout, that shows a table of contents on the left
defaults:
  - values:
      layout: default_toc
