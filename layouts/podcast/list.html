{{ define "hero" }}
    <header class="header-hero-dark py-0 pt-16 px-4">
        <div class="container mx-auto text-white md:flex justify-around items-center">
            <div class="md:w-1/2">
                <h1 class="text-white text-center">Podcasts</h1>
            </div>
            <div class="md:w-1/2 md:ml-8">
                <div class="text-center">
                    <img class="inline-block w-56" src="/icons/icon-audience-devops.svg">
                </div>
            </div>
        </div>
    </header>

    <img class="w-full h-20" src="/images/waves.svg">
{{ end }}

{{ define "main" }}
    <!-- Set the page context in a variable in a loop. -->
    {{ $pageContext := . }}

    <!-- Grab the webinar and event page data. -->
    {{ $webinars := (where $.Site.Pages "Type" "webinars") }}

    <!-- Create dicts so we can sort the resources by start/publish date. -->
    {{ $resourcesWithDate := slice }}

    <!-- Create the resource data dicts for webinars. -->
    {{ range $webinars }}
        <!-- If the webinar is not marked as unlisted we will add it to the list. -->
        {{ if and (eq .Params.unlisted false) (isset .Params.main "podcast_url") }}
            {{ $resourcesWithDate = $resourcesWithDate | append (dict "date" .Params.main.sortable_date "data" .) }}
        {{ end }}
    {{ end }}

    <div class="pulumi-event-list-container mt-5">
        <div class="container mx-auto pt-10">

            <!-- Podcast list. -->
            <ul class="flex flex-wrap justify-center list-none p-0 sm:p-2 resource-list">

                <!-- Loop over the resource items and create the tiles. -->
                {{ range sort $resourcesWithDate "date" "desc" }}
                    {{ $data := .data }}

                    <!-- Create the values for rendering. -->
                    {{ $href := (relref $pageContext .Params.url_slug) }}
                    {{ $icon := "microphone" }}

                    <!-- Set the values based on the type of the page. -->
                    {{ $description := $data.Params.meta_desc }}
                    {{ $displayDate := dateFormat "January 2, 2006" $data.Params.main.sortable_date }}

                    <li class="w-full m-0 p-2 md:w-1/2 xl:w-1/3 event-list-item">
                        <article class="rounded shadow-md bg-white border border-gray-200 mb-10 flex flex-col mx-2 md:mx-0">
                            <a href="{{ $href }}" class="w-full h-full">
                                <span class="block w-full h-full p-4 relative">
                                    <span class="block flex border-solid border-b border-gray-200 pb-2">
                                        <span>
                                            <span class="flex items-center justify-center h-12 w-12 rounded-full bg-purple-500 text-white mr-3">
                                                <i class="fas fa-{{ $icon }}"></i>
                                            </span>
                                        </span>
                                        <span>
                                            <span class="font-bold text-xl">
                                                {{ $data.Params.title }}
                                            </span>
                                        </span>
                                    </span>
                                    <span class="block mt-3">
                                        <p class="m-0 pt-0 text-gray-700">
                                            {{ $description }}
                                        </p>
                                    </span>
                                    <span class="block absolute bottom-0 mb-5">
                                        <span class="my-0 py-1 px-2 inline-block mr-3 text-gray-600">
                                                <i class="fas fa-calendar mr-2"></i>
                                                {{ $displayDate }}
                                        </span>
                                    </span>
                                </span>
                            </a>
                        </article>
                    </li>
                {{ end }}
            </ul>
        </div>
    </div>

    {{ partial "social.html" . }}

    {{ partial "learnmore-contactus.html" . }}
{{ end }}
