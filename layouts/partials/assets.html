<!--
  This partial contains the tags to include the JS and CSS assets for the website.
  You will need to include this partial in head of pages you want the CSS styles and/or
  JS components.
-->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>

{{ $js := resources.Get "js/bundle.js" | fingerprint }}
<script src="{{ $js.RelPermalink }}" defer></script>

{{/* Inline template for CSS links: uses fingerprinted bundle in dev, post-processed bundle in prod */}}
{{ define "css-link" }}
    {{- $css := resources.Get .source | fingerprint -}}
    {{- $_ := $css.Permalink -}}
    {{- if hugo.IsServer -}}
        <link rel="stylesheet" href="{{ $css.RelPermalink }}">
    {{- else -}}
        <link rel="stylesheet" href="/css/{{ .name }}.{{ getenv "CSS_BUNDLE_ID" }}.css">
    {{- end -}}
{{ end }}

<!--
  Our marketing styles diverge a bit from the other parts of the website so we load
  in a different bundle on our marketing pages.
-->
{{ $nonMarketingSections := slice "docs" "registry" "blog" "learn" "tutorials" "providers" "collections" "templates" "ai" "authors" "tags" "legal" }}
{{ if not (in $nonMarketingSections .Section) }}
    {{ template "css-link" (dict "source" "css/marketing.css" "name" "marketing") }}
{{ end }}

{{ template "css-link" (dict "source" "css/bundle.css" "name" "bundle") }}
