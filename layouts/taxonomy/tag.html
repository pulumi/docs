{{ define "main" }}
    <div class="container mx-auto px-4 py-8">
        <div class="lg:flex">
            <div class="lg:w-3/12 pr-8">
                {{ partial "blog/sidebar.html" . }}
            </div>

            <div class="lg:w-7/12">
                {{ $authorData := index $.Site.Data.team.team .Data.Term }}
                {{ $blogPosts := where .Data.Pages "Section" "blog" }}
                
                {{ if eq .Data.Term "platform-engineering-pillars" }}
                    <!-- For platform-engineering-pillars, show in chronological order -->
                    {{ $paginator := .Paginate $blogPosts.ByDate }}
                    
                    <header class="mb-12 pb-6 border-b border-gray-200">
                        <h1 class="no-anchor text-4xl font-bold mb-4">
                            Platform Engineering Pillars
                        </h1>
                        <p class="text-xl text-gray-600 mb-6">A comprehensive guide to building successful internal developer platforms.</p>
                        <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                            <h2 class="text-lg font-semibold mb-3">In this series:</h2>
                            <ol class="list-decimal list-inside space-y-2">
                                <li>Introduction to Platform Engineering Pillars</li>
                                <li>Infrastructure Provisioning</li>
                                <li>Policy and Governance</li>
                                <li>Self-Service Developer Experience</li>
                                <li>Observability and Monitoring</li>
                                <li>Cost Management and Optimization</li>
                            </ol>
                        </div>
                    </header>
                    
                    {{ $count := 0 }}
                    {{ range $paginator.Pages }}
                        {{ $count = add $count 1 }}
                        <article class="my-8 pb-8 border-b border-gray-200">
                            <div class="flex items-center text-sm text-gray-600 mb-2">
                                <span class="mr-3">Part {{ $count }}</span>
                                <time>
                                    {{ .Date.Format "January 2, 2006" }}
                                </time>
                            </div>
                            <h2 class="text-2xl font-bold mb-4"><a data-track="{{ .Title | urlize }}" href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
                            <section>
                                {{ partial "blog/poster" . }}
                                <div class="prose max-w-none mt-4">
                                    {{ partial "blog/summary" . }}
                                </div>
                                <div class="mt-4">
                                    <a href="{{ .RelPermalink }}" class="text-blue-600 hover:text-blue-800 font-medium">Read more â†’</a>
                                </div>
                            </section>
                        </article>
                    {{ end }}
                {{ else }}
                    {{ $paginator := .Paginate $blogPosts.ByDate.Reverse }}


                    <header>
                        <h1 class="no-anchor">
                            Posts Tagged
                            <span class="text-blue-600">
                                {{ .Data.Term | lower }}
                            </span>
                        </h1>
                    </header>

                    {{ range $paginator.Pages }}
                        <article class="my-8 pb-8 border-b border-gray-200">
                            <h2><a data-track="{{ .Title | urlize }}" href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
                            <div class="flex items-center">
                                <time>
                                    {{ .Date.Format "Monday, Jan 2, 2006" }}
                                </time>
                            </div>
                            <section>
                                {{ partial "blog/poster" . }}
                                {{ partial "blog/summary" . }}
                            </section>
                        </article>
                    {{ end }}
                {{ end }}

                {{ partial "blog/paginator.html" . }}
            </div>

            <div class="lg:w-2/12 pl-8"></div>
        </div>
    </div>
{{ end }}
