{{ define "main" }}
{{ $pagelist := .Pages }}
{{ partial "hero.html" (dict "title" .Title) }}
{{ partial "compliance/breadcrumb-schema.html" . }}
{{ partial "compliance/howto-schema.html" . }}

<div class="container mx-auto">
  <section class="px-4 md:px-0">
    <div class="container mx-auto max-w-4xl my-16 px-6">
      <section class="mt-4 py-4 px-4 md:px-0">
        <div class="container mx-auto text-center max-w-4xl">
          <p>
            Ensuring that your cloud infrastructure is compliant with frameworks like PCI DSS, ISO 27001, and CIS
            is critical for safeguarding sensitive data, maintaining customer trust, and adhering to legal and
            regulatory requirements. Compliance with these frameworks demonstrates a commitment to implementing
            best practices in security and risk management, which helps protect against data breaches,
            cyber threats, and operational disruptions.
          </p>
          <p class="mt-4">
            Pulumi's platform provides policy-as-code tools to ensure your AWS, Azure, and GCP infrastructure meets 
            compliance standards like PCI DSS, CIS Benchmarks, and ISO 27001. Using Pulumi CrossGuard and Insights, 
            you can detect and prevent non-compliant configurations automatically, simplifying audits and avoiding cloud 
            misconfigurations. Our cloud compliance automation solutions enable continuous monitoring and remediation 
            across multi-cloud environments, reducing the risk of security breaches and helping organizations maintain 
            regulatory compliance.
          </p>
        </div>
      </section>
      {{ $frameworks := index .Site.Data.compliance "pages" }}
      {{ $frameworksfiltered := slice }}
      {{ $cloudsfiltered := slice }}
      {{ range $framework := $frameworks.frameworks }}
      {{ if not (in (apply $frameworksfiltered "index" "." "framework") $framework.framework) }}
        {{ $frameworksfiltered = $frameworksfiltered | append (dict "framework" $framework.framework "description" $framework.description) }}
      {{ end }}
      {{ if not (in $cloudsfiltered $framework.cloud) }}
        {{ $cloudsfiltered = $cloudsfiltered | append $framework.cloud }}
      {{ end }}
      {{ end }}

      {{ range $framework := $frameworksfiltered }}
      {{ $pages := where $pagelist "Params.framework" $framework.framework }}
        
        <section class="mt-4 py-4 px-4 md:px-0">
          <div class="container mx-auto max-w-4xl">
            <h3>{{ $framework.framework }} Compliance</h3>
            <p>
              {{ .description }}
            </p>
            {{ if eq $framework.framework "PCI DSS" }}
            <p class="font-semibold">PCI DSS Compliance: Requirements for securing cardholder data in cloud environments.</p>
            {{ else if eq $framework.framework "CIS" }}
            <p class="font-semibold">CIS Compliance: Security benchmarks and best practices for protecting cloud infrastructure.</p>
            {{ else if eq $framework.framework "ISO 27001" }}
            <p class="font-semibold">ISO 27001 Compliance: Information security management system standards for comprehensive data protection.</p>
            {{ end }}
            <p>Learn more about how Pulumi can help your cloud infrastructure meet {{ $framework.framework }} compliance:</p>
            {{ $cloudPages := where $pages "Params.page_type" "cloud" }}
            {{ range $cloud := $cloudPages }}
            {{ $currCloud := $cloud.Params.cloud }}
            <h4><a class="hover:text-blue-600" href="{{ $cloud.Permalink }}">{{ $cloud.Params.cloud }}</a></h4>
            <div class="flex felx-col md:flex-row flex-wrap">
            {{ $resourcePages := where $pages "Params.page_type" "service" }}
              {{ range $resourcePages }}
              {{ if eq .Params.cloud $currCloud }}
                  <div class="w-2/3 md:w-1/3 mx-2 my-2 p-0">
                    <div class="rounded border p-4 border-gray-300 shadow-sm flex items-center gap-3">
                      <i class="far fa-arrow-alt-circle-right w-4 text-gray-700"></i>
                      <a href="{{ .Permalink }}" class="text-gray-800 font-display text-lg hover:text-blue-600">{{ .Params.service }}</a>
                    </div>
                  </div>
                  {{ end}}
              {{ end }}
            </div>
            {{ end }}
            <div class="mt-6 text-right">
              {{ if eq $framework.framework "PCI DSS" }}
              <a href="/docs/using-pulumi/crossguard/compliance-ready-policies/" class="text-blue-600 font-semibold hover:underline">Learn more about Pulumi's compliance as code solutions for PCI DSS →</a>
              {{ else if eq $framework.framework "CIS" }}
              <a href="/docs/using-pulumi/crossguard/compliance-ready-policies/" class="text-blue-600 font-semibold hover:underline">Learn more about Pulumi's compliance as code solutions for CIS →</a>
              {{ else if eq $framework.framework "ISO 27001" }}
              <a href="/docs/using-pulumi/crossguard/compliance-ready-policies/" class="text-blue-600 font-semibold hover:underline">Learn more about Pulumi's compliance as code solutions for ISO 27001 →</a>
              {{ end }}
            </div>
          </div>
        </section>
      {{ end }}

{{ partial "compliance/faq.html" . }}
{{ partial "compliance/webpage-faq-schema.html" . }}

{{ partial "compliance/related-frameworks.html" . }}

</div>
{{ end }}