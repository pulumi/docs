{{ define "hero" }}
{{ partial "hero" (dict "title" .Params.title "subtitle" .Params.overview.title) }}
{{ end }}

{{ define "main" }}
{{ $pageContext := . }}

{{ if .Params.demo_video }}
<section id="demo-video" class="container mx-auto my-16 flex flex-col">
    <div class="flex flex-col lg:flex-row px-8 items-center justify-center">
        <div class="w-full lg:w-1/2 mb-8 lg:mb-0">
            <div id="video" style="position: relative; top: -100px;"></div>
            <div class="responsive-video-container video-16-9 rounded-xl shadow-2xl relative h-0 overflow-hidden">
                {{ $videoID := index (split .Params.demo_video.image "?v=") 1 }}
                <iframe
                src="https://www.youtube.com/embed/{{ .Params.demo_video.videoID }}?rel=0"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;"
                allowfullscreen=""
                title="{{ .Params.demo_video.title }}"
            ></iframe>
            </div>
        </div>
    </div>
</section>
{{ end }}

<section id="cta" class="container mx-auto text-center mb-16">
    <a href="https://app.pulumi.com/signup" class="btn-primary">Get Started</a>
    <a href="/contact/?form=request-a-demo" class="btn-secondary ml-4">Book a Demo</a>
</section>

<section id="benefits" class="container mx-auto my-16 px-4">
    {{ with .Params.why_neo }}
    <h2 class="text-center">{{ .title }}</h2>
    <p class="mx-auto max-w-5xl text-center xl:text-left">
        {{ .description }}
    </p>
    <div class="max-w-7xl mx-auto my-4">
        <!-- Small screens: All 5 items in one group -->
        <div class="flex flex-wrap justify-content items-stretch text-left lg:hidden">
            {{ range $item := .benefits }}
            <div class="w-full sm:w-1/2 p-3">
                <div class="h-full card bg-white p-8">
                    <div class="icon-section mb-8 flex">
                        {{ partial "color-icon.html" (dict "icon" $item.icon "icon_color" $item.color) }}
                    </div>
                    <div>
                        <h5>{{ $item.title }}</h5>
                    </div>
                    <div class="mt-6">
                        <p>{{ $item.description | markdownify }}</p>
                    </div>
                </div>
            </div>
            {{ end }}
        </div>

        <!-- Large screens: 3+2 grouping -->
        <div class="hidden lg:block">
            <!-- First group: 3 items -->
            <div class="flex flex-wrap justify-content items-stretch text-left mb-8">
                {{ range $index, $item := .benefits }}
                {{ if lt $index 3 }}
                <div class="w-full lg:w-1/3 p-3">
                    <div class="h-full card bg-white p-8">
                        <div class="icon-section mb-8 flex">
                            {{ partial "color-icon.html" (dict "icon" $item.icon "icon_color" $item.color) }}
                        </div>
                        <div>
                            <h5>{{ $item.title }}</h5>
                        </div>
                        <div class="mt-6">
                            <p>{{ $item.description | markdownify }}</p>
                        </div>
                    </div>
                </div>
                {{ end }}
                {{ end }}
            </div>

            <!-- Second group: 2 items -->
            <div class="flex flex-wrap justify-center items-stretch text-left">
                {{ range $index, $item := .benefits }}
                {{ if and (ge $index 3) (lt $index 5) }}
                <div class="w-full lg:w-1/3 p-3">
                    <div class="h-full card bg-white p-8">
                        <div class="icon-section mb-8 flex">
                            {{ partial "color-icon.html" (dict "icon" $item.icon "icon_color" $item.color) }}
                        </div>
                        <div>
                            <h5>{{ $item.title }}</h5>
                        </div>
                        <div class="mt-6">
                            <p>{{ $item.description | markdownify }}</p>
                        </div>
                    </div>
                </div>
                {{ end }}
                {{ end }}
            </div>
        </div>
    </div>
    {{ end }}
</section>

<section id="building-blocks" class="container my-16 mx-auto text-center px-6">
    <h2 class="text-center">{{ .Params.building_blocks.title }}</h2>

    <!-- First render items with graphics -->
    {{ range $index, $block := .Params.building_blocks.items }}
    {{ if $block.graphic }}
    {{ $order := "lg:order-first lg:pr-4" }}
    {{ $padding := "lg:pl-8 lg:pr-8" }}
    {{ if eq (mod $index 2) 0 }}
    {{ $order = "lg:order-last lg:pl-4"}}
    {{ end }}
    <div class="container mx-auto flex flex-col text-center lg:flex-row my-24">
        <div class="w-full lg:w-1/2 lg:content-center {{ $padding }}">
            <div class="card bg-white p-8 h-full">
                <h3 class="m-0 p-0 text-3xl mb-4">{{ $block.header }}</h3>
                <h4 class="p-0 my-4 text-left text-gray-700 text-xl">{{ $block.subheader }}</h4>
                <ul>
                    {{ range $item := $block.body }}
                    <li class="text-left">{{ $item | markdownify }}</li>
                    {{ end }}
                </ul>
            </div>
        </div>
        <div class="w-full lg:w-1/2 {{ $order }}">
            <img class="mx-auto" src="{{ $block.graphic }}" />
        </div>
    </div>
    {{ end }}
    {{ end }}

    <!-- Then render items without graphics as cards side by side -->
    <div class="flex flex-wrap justify-content items-stretch text-left my-8">
        {{ range $block := .Params.building_blocks.items }}
        {{ if not $block.graphic }}
        <div class="w-full lg:w-1/2 p-4">
            <div class="h-full card bg-white p-8">
                <h3 class="m-0 p-0 text-2xl mb-4">{{ $block.header }}</h3>
                <h4 class="p-0 my-4 text-gray-700 text-lg">{{ $block.subheader }}</h4>
                <ul>
                    {{ range $item := $block.body }}
                    <li>{{ $item | markdownify }}</li>
                    {{ end }}
                </ul>
            </div>
        </div>
        {{ end }}
        {{ end }}
    </div>
</section>

<section id="learn" class="container mx-auto text-center mt-16 px-6">
    <div class="max-w-5xl mx-auto text-center px-6">
        <h2>{{ .Params.learn.title }}</h2>
        <div class="text-left">{{ .Params.learn.description }}</div>
    </div>
    <div class="flex flex-wrap justify-content items-stretch text-left my-4">
        {{ range $index, $item := .Params.learn.items }}
        <div class="w-full xl:w-1/2 p-3">
            <div class="h-full {{ if eq $index 0 }}bg-violet-100{{ else }}card bg-white{{ end }} p-12 rounded-xl text-center xl:text-left">
                <div>
                    <h5>{{ $item.title }}</h5>
                </div>
                <div class="mt-6">
                    <p>{{ $item.description | markdownify }}</p>
                </div>
                <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center xl:justify-start">
                    {{ range $button := $item.buttons }}
                    <a href="{{ $button.link }}" class="z-10 btn-{{ $button.type }}">{{ $button.action }}</a>
                    {{ end }}
                </div>
            </div>
        </div>
        {{ end }}
    </div>
</section>
{{ end }}