{{ define "main" }}
    {{ partial "hero.html" . }}

    <section class="content-block content-block-anchors bg-black white-text">
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12 anchor-container" id="anchor-point">
                    <ul class="anchor-list">
                        <li class="anchor-item"><a href="#benefits">Benefits</a></li>
                        <li class="anchor-item"><a href="#code">Code</a></li>
                        <li class="anchor-item"><a href="#get-started">Get Started</a></li>
                        <li class="anchor-item"><a href="#contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="content-block" id="benefits">
        <div class="content-content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1">
                        <div class="row">
                            <div class="col-sm-12">
                                <h2 class="h4 text-purple">Benefits of Pulumi</h2>
                            </div>
                        </div>
                        <div class="row cols-are-spaced-md">
                            <div class="col col-md-3">
                                <div class="content">
                                    <img src="/icons/realCode_icon.svg" width="65" alt="" class="margin-bottom-30">
                                    <h3 class="h6">Real Code</h3>
                                    <p>Pulumi is infrastructure as real code. This means you get all the benefits of your favorite language and tool for provisioning infrastructure: code completion, error checking, versioning, IDE support, etc. - without the need to manage limited DSL syntax.</p>
                                </div>
                            </div>
                            <div class="col col-md-3">
                                <div class="content">
                                    <img src="/icons/reusable-component.svg" width="88" alt="" class="margin-bottom-30">
                                    <h3 class="h6">Familiar Constructs</h3>
                                    <p>Real languages means you get familiar constructs like for loops, functions, and classes - cutting boilerplate and enforcing best practices. Pulumi lets you leverage existing package management tools and techniques. </p>
                                </div>
                            </div>
                            <div class="col col-md-3">
                                <div class="content">
                                    <img src="/icons/immutable_infastrc_icon.svg" width="78" alt="" class="margin-bottom-30">
                                    <h3 class="h6">Ephemeral Infrastructure</h3>
                                    <p>Pulumi has deep support for cloud native technologies, like Kubernetes, and supports advanced deployment scenarios that cannot be expressed with Terraform. Pulumi is a proud member of the Cloud Native Computing Foundation (CNCF).</p>
                                </div>
                            </div>
                            <div class="col col-md-3">
                                <div class="content">
                                    <img src="/icons/icon-core3.svg" width="45" alt="" class="margin-bottom-30">
                                    <h3 class="h6">TF Provider Integration</h3>
                                    <p>Pulumi is able to adapt any Terraform Provider for use with Pulumi, enabling management of any infrastructure supported by the Terraform Providers ecosystem using Pulumi programs. <a href="https://github.com/pulumi/pulumi-terraform">Find out more here.</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="content-block bg-grey" id="code">
        <div class="content-content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1">
                        <div class="row cols-are-spaced-md">
                            <div class="col col-md-6">
                                <div class="content">
                                    <h2 class="h4 text-purple">Take advantage of real coding features with Pulumi</h2>
                                    <p>Pulumi provides a more expressive and efficient way to define cloud resources:
                                        <ul>
                                            <li>Use variable loops, not copy/paste</li>
                                            <li>Use any Node libaries (or Python/Go)</li>
                                            <li>On-the-fly error checking </li>
                                            <li>Freeform code instead of complex interpolations</li>
                                        </ul>
                                    </p>
                                    <p><a href="https://github.com/pulumi/examples" target="_blank">Find many other examples here.</a></p>
<pre><code class="javascript hljs">import * as aws from "@pulumi/aws";
import { readFileSync, readdirSync } from "fs";
import { join as pathjoin } from "path";

const bucket = new aws.s3.Bucket("mybucket");

const folder = "./files";
let files = readdirSync(folder);
for (let file of files) {
    const object = new aws.s3.BucketObject(file, {
        bucket: bucket,
        content: readFileSync(pathjoin(folder, file)).toString("utf8")
    });
}

export const bucketname = bucket.id;
</code></pre>

                                </div>
                            </div>
                            <div class="col col-md-6">
                                <div class="content">
<pre><code class="hcl hljs">resource "aws_s3_bucket" "mybucket" {
    bucket_prefix = "mybucket"
}

resource "aws_s3_bucket_object" "data_txt" {
    key        = "data.txt"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/data.txt"
}

resource "aws_s3_bucket_object" "index_html" {
    key        = "index.html"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/index.html"
}

resource "aws_s3_bucket_object" "index_js" {
    key        = "index.js"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/index.js"
}

resource "aws_s3_bucket_object" "main.css" {
    key        = "main.css"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/main.css"
}

resource "aws_s3_bucket_object" "favicon.ico" {
    key        = "favicon.ico"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/favicon.ico"
}

output "bucketname" {
    value = "${aws_s3_bucket.mybucket.id}"
}
</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>


    <section class="content-block bg-grey" id="code">
        <div class="content-content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1">
                        <div class="row cols-are-spaced-md">
                            <div class="col col-md-6">
                                <div class="content">
                                    <h2 class="h4 text-purple">Productive cloud native programming</h2>
                                    <p>Pulumi is designed with cloud native computing in mind - from containers to serverless, providing a productive model for quickly building and deploying apps:
                                        <ul>
                                            <li>Rich, built in support for event handlers</li>
                                            <li>Easy-to-use in-line Lambdas for simple functions</li>
                                            <li>Use JavaScript for both infrastructure and Lambda callbacks</li>
                                            <li>Avoid the need for significant boiler plate code</li>
                                        </ul>
                                    </p>
                                    <p><a href="https://github.com/pulumi/examples" target="_blank">Find many other examples here.</a></p>
<pre><code class="javascript hljs">import * as aws from "@pulumi/aws";

// Create an S3 Bucket
const bucket = new aws.s3.Bucket("mybucket");

// Register a Lambda to handle Bucket Notification
bucket.onObjectCreated("newObj", async (ev, ctx) => {
    // Write code inline, or use a Zip
    console.log(JSON.stringify(ev));
});

// Export the bucket name for easy scripting
export const bucketName = bucket.id;
</code></pre>

                                </div>
                            </div>
                            <div class="col col-md-6">
                                <div class="content">
<pre><code class="hcl hljs">resource "aws_s3_bucket" "mybucket" {
    bucket_prefix = "mybucket"
}

data "archive_file" "lambda_zip" {
    type        = "zip"
    output_path = "lambda.zip"

    source {
    filename = "index.js"
    content = <<EOF
exports.handler = async(ev, ctx) => {
    console.log(JSON.stringify(ev))
}
EOF
    }
}

data "aws_iam_policy_document" "lambda-assume-role-policy" {
statement {
    actions = ["sts:AssumeRole"]

    principals {
    type        = "Service"
    identifiers = ["lambda.amazonaws.com"]
    }
}
}

resource "aws_iam_role" "lambda" {
    assume_role_policy = "${data.aws_iam_policy_document.lambda-assume-role-policy.json}"
}

resource "aws_lambda_function" "my_lambda" {
    filename = "${data.archive_file.lambda_zip.output_path}"
    source_code_hash = "${data.archive_file.lambda_zip.output_base64sha256}"
    function_name = "my_lambda"
    role = "${aws_iam_role.lambda.arn}"
    handler = "index.handler"
    runtime = "nodejs8.10"
}

resource "aws_lambda_permission" "allow_bucket" {
    statement_id  = "AllowExecutionFromS3Bucket"
    action        = "lambda:InvokeFunction"
    function_name = "${aws_lambda_function.my_lambda.arn}"
    principal     = "s3.amazonaws.com"
    source_arn    = "${aws_s3_bucket.mybucket.arn}"
}

resource "aws_s3_bucket_notification" "bucket_notification" {
    bucket = "${aws_s3_bucket.mybucket.id}"

    lambda_function {
        lambda_function_arn = "${aws_lambda_function.my_lambda.arn}"
        events              = ["s3:ObjectCreated:*"]
    }
}

output "bucket_name" {
    value = "${aws_s3_bucket.mybucket.id}"
}
</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    {{ partial "how-pulumi-works.html" . }}

    {{ partial "get-started.html" . }}

    <section class="content-block bg-purple white-text" id="contact">
        <div class="content-content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1">
                        <div class="row cols-are-spaced-md">
                            <div class="col col-md-6">
                                <div class="content">
                                    <h2 class="h3">Let Pulumi assist with your cloud infrastructure</h2>
                                    <p>Need help converting your Terraform templates into Pulumi code? Drop us a line.</p>
                                </div>
                            </div>
                            <div class="col col-md-6">
                                <div class="content">
                                    <div class="hbspt-form-wrapper compact">
                                        <!--[if lte IE 8]>
                                        <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
                                        <![endif]-->
                                        <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
                                        <script>
                                        hbspt.forms.create({
                                            portalId: "4429525",
                                            formId: "123cfbdb-9ce4-4d33-a9b7-c30302463d7a"
                                        });
                                        </script>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

{{ end }}
