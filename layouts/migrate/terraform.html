{{ define "hero" }}
    <header class="bg-purple-500 py-24 text-white">
        <div class="container mx-auto text-white md:flex">
            <div class="md:w-1/2">
                <h1 class="text-white">Migrating to Pulumi from Terraform</h1>
                <p>
                    HashiCorp Terraform provides a custom DSL called Hashicorp
                    Configuration Language (HCL) to describe and provision infrastructure
                    resources on Terraform providers.
                </p>
                <p>
                    Pulumi enables you to describe the same infrastructure resources as
                    real code, providing huge productivity gains, and has deep support for
                    cloud native technologies such as Kubernetes and serverless
                    programming.
                </p>
            </div>
            <div class="md:w-1/2 md:ml-8 text-white">
                <div class="hs-form-white">
                    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
                    <script>
                        hbspt.forms.create({
                            portalId: "4429525",
                            formId: "123cfbdb-9ce4-4d33-a9b7-c30302463d7a"
                        });
                    </script>
                </div>
            </div>
        </div>
    </header>
{{ end }}

{{ define "main" }}
    <nav class="bg-black sticky top-0">
        <div class="container mx-auto">
            <ul class="flex list-none justify-between">
                <li><a class="block py-4 px-4 text-white hover:text-gray-300" href="#benefits">Benefits</a></li>
                <li><a class="block py-4 px-4 text-white hover:text-gray-300" href="#code">Code</a></li>
                <li><a class="block py-4 px-4 text-white hover:text-gray-300" href="#how-it-works">How it Works</a></li>
                <li><a class="block py-4 px-4 text-white hover:text-gray-300" href="#get-started">Get Started</a></li>
                <li><a class="block py-4 px-4 text-white hover:text-gray-300" href="#contact-us">Contact Us</a></li>
            </ul>
        </div>
    </nav>

    <section id="benefits" class="container mx-auto py-16">
        <h2>Benefits of Pulumi</h2>

        <div class="md:flex my-8">
            <div>
                <img class="h-12 mb-6" src="{{ .Site.BaseURL }}/icons/realCode_icon.svg">
                <h3>Real Code</h3>
                <p>
                    Pulumi is infrastructure as real code. This means you get all the benefits
                    of your favorite language and tool for provisioning cloud infrastructure:
                    code completion, error checking, versioning, IDE support, and general
                    productivity gains &mdash; without the need to manage YAML and DSL syntax.
                </p>
            </div>
            <div class="mx-8">
                <img class="h-12 mb-6" src="{{ .Site.BaseURL }}/icons/reusable-component.svg">
                <h3>Familiar Constructs</h3>
                <p>
                    Real languages means you get familiar constructs like for loops,
                    functions, and classes - cutting boilerplate and enforcing best
                    practices. Pulumi lets you leverage existing package management tools
                    and techniques.
                </p>
            </div>
             <div class="mx-8">
                <img class="h-12 mb-6" src="{{ .Site.BaseURL }}/icons/immutable_infastrc_icon.svg">
                <h3>Ephemeral Infrastructure</h3>
                <p>
                    Pulumi has deep support for cloud native technologies, like
                    Kubernetes, and supports advanced deployment scenarios that cannot be
                    expressed with Terraform. Pulumi is a proud member of the Cloud Native
                    Computing Foundation (CNCF).
                </p>
            </div>
            <div>
                <img class="h-12 mb-6" src="{{ .Site.BaseURL }}/icons/icon-core3.svg">
                <h3>TF Provider Integration</h3>
                <p>
                    Pulumi is able to adapt any Terraform Provider for use with Pulumi,
                    enabling management of any infrastructure supported by the Terraform
                    Providers ecosystem using Pulumi programs.
                    <a href="https://github.com/pulumi/pulumi-terraform">Find out more here</a>.
                </p>
            </div>
        </div>
    </section>

    <section id="code" class="bg-gray-200 py-16">
        <div class="container mx-auto">
            <div class="md:flex my-8">
                <div class="md:w-1/2 md:mr-4">
                    <h2>Take advantage of real coding features with Pulumi</h2>
                    <p>
                        Pulumi provides a more expressive and efficient way to define cloud resources:
                    </p>
                    <ul>
                        <li>Use variable loops, not copy/paste</li>
                        <li>Use any Node libaries (or Python/Go)</li>
                        <li>On-the-fly error checking</li>
                        <li>Freeform code instead of complex interpolations</li>
                    </ul>
                    <p>
                        <a href="https://github.com/pulumi/examples">Find many other examples here</a>.
                    </p>
                </div>
                <div class="md:w-1/2 md:ml:4">
                    <div class="highlight">

<pre><code>import * as aws from "@pulumi/aws";
import { readFileSync, readdirSync } from "fs";
import { join as pathjoin } from "path";

const bucket = new aws.s3.Bucket("mybucket");

const folder = "./files";
let files = readdirSync(folder);
for (let file of files) {
    const object = new aws.s3.BucketObject(file, {
        bucket: bucket,
        content: readFileSync(pathjoin(folder, file)).toString("utf8")
    });
}

export const bucketname = bucket.id;
</pre></code>

<pre><code>resource "aws_s3_bucket" "mybucket" {
    bucket_prefix = "mybucket"
}

resource "aws_s3_bucket_object" "data_txt" {
    key        = "data.txt"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/data.txt"
}

resource "aws_s3_bucket_object" "index_html" {
    key        = "index.html"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/index.html"
}

resource "aws_s3_bucket_object" "index_js" {
    key        = "index.js"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/index.js"
}

resource "aws_s3_bucket_object" "main.css" {
    key        = "main.css"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/main.css"
}

resource "aws_s3_bucket_object" "favicon.ico" {
    key        = "favicon.ico"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/favicon.ico"
}
</pre></code>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="code" class="bg-gray-200 py-16">
        <div class="container mx-auto">
            <div class="md:flex my-8">
                <div class="md:w-1/2 md:mr-4">
                    <h2>Productive cloud native programming</h2>
                    <p>
                        Pulumi is designed with cloud native computing in mind - from
                        containers to serverless, providing a productive model for quickly
                        building and deploying apps:
                    </p>
                    <ul>
                        <li>Rich, built in support for event handlers</li>
                        <li>Easy-to-use in-line Lambdas for simple functions</li>
                        <li>Use JavaScript for both infrastructure and Lambda callbacks</li>
                        <li>Avoid the need for significant boiler plate code</li>
                    </ul>
                    <p>
                        <a href="https://github.com/pulumi/examples">Find many other examples here</a>.
                    </p>
                </div>
                <div class="md:w-1/2 md:ml:4">
                    <div class="highlight">

<pre><code>import * as aws from "@pulumi/aws";

// Create an S3 Bucket
const bucket = new aws.s3.Bucket("mybucket");

// Register a Lambda to handle Bucket Notification
bucket.onObjectCreated("newObj", async (ev, ctx) => {
    // Write code inline, or use a Zip
    console.log(JSON.stringify(ev));
});

// Export the bucket name for easy scripting
export const bucketName = bucket.id;
</pre></code>

<pre><code>resource "aws_s3_bucket" "mybucket" {
    bucket_prefix = "mybucket"
}

data "archive_file" "lambda_zip" {
    type        = "zip"
    output_path = "lambda.zip"

    source {
    filename = "index.js"
    content = < {
    console.log(JSON.stringify(ev))
}
EOF
    }
}

data "aws_iam_policy_document" "lambda-assume-role-policy" {
statement {
    actions = ["sts:AssumeRole"]

    principals {
    type        = "Service"
    identifiers = ["lambda.amazonaws.com"]
    }
}
}

resource "aws_iam_role" "lambda" {
    assume_role_policy = "${data.aws_iam_policy_document.lambda-assume-role-policy.json}"
}

resource "aws_lambda_function" "my_lambda" {
    filename = "${data.archive_file.lambda_zip.output_path}"
    source_code_hash = "${data.archive_file.lambda_zip.output_base64sha256}"
    function_name = "my_lambda"
    role = "${aws_iam_role.lambda.arn}"
    handler = "index.handler"
    runtime = "nodejs8.10"
}

resource "aws_lambda_permission" "allow_bucket" {
    statement_id  = "AllowExecutionFromS3Bucket"
    action        = "lambda:InvokeFunction"
    function_name = "${aws_lambda_function.my_lambda.arn}"
    principal     = "s3.amazonaws.com"
    source_arn    = "${aws_s3_bucket.mybucket.arn}"
}

resource "aws_s3_bucket_notification" "bucket_notification" {
    bucket = "${aws_s3_bucket.mybucket.id}"

    lambda_function {
        lambda_function_arn = "${aws_lambda_function.my_lambda.arn}"
        events              = ["s3:ObjectCreated:*"]
    }
}

output "bucket_name" {
    value = "${aws_s3_bucket.mybucket.id}"
}

</pre></code>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="how-it-works" class="bg-purple-500 py-16">
        <div class="container mx-auto">
            <h2 class="text-white text-center">How Pulumi Works</h2>
            <img class="max-w-5xl mx-auto mt-12" src="https://www.pulumi.com/assets/images/infographics@2x.jpg" alt="How Pulumi works">
        </div>
    </section>

    <section id="get-started" class="bg-gray-200 py-16">
        <div class="container mx-auto max-w-5xl">
            <div class="md:flex my-8 md:max-w-32 align-top">
                <div class="md:w3-/12 mr-4">
                    <h2>Get Started with Pulumi</h2>
                    <p>
                        Pulumi works with your favorite language, and can be used with any cloud.
                    </p>
                </div>
                <div class="md:w-3/12 align-middle">
                    <div class="flex align-middle items-center">
                        <h5 class="flex items-center whitespace-no-wrap">
                            <span class="border-2 border-blue-500 rounded-full bg-white text-blue-600 w-8 h-8 text-center mr-2 text-green-500">1</span>
                            Install Pulumi
                        </h5>
                    </div>
                    <ul class="list-inside pl-8 ml-2">
                        <li><a class="text-blue-700 text-sm" href="{{ relref . "/docs/quickstart/install" }}">Setup</a></li>
                    </ul>
                </div>
                <div class="md:w-3/12 align-middle md:mx-4">
                    <div class="flex align-middle items-center">
                        <h5 class="flex items-center whitespace-no-wrap">
                            <span class="border-2 border-blue-500 rounded-full bg-white text-blue-600 w-8 h-8 text-center mr-2 text-green-500">2</span>
                            Try Our Tutorials
                        </h5>
                    </div>
                    <ul class="list-inside pl-8 ml-2">
                        <li><a class="text-blue-700 text-sm" href="{{ relref . "/docs/quickstart" }}">QuickStarts</a></li>
                        <li><a class="text-blue-700 text-sm" href="{{ relref . "/docs/tour" }}">Tour</a></li>
                    </ul>
                </div>
                <div class="md:w-3/12 align-middle">
                    <div class="flex align-middle items-center">
                        <h5 class="flex items-center whitespace-no-wrap">
                            <span class="border-2 border-blue-500 rounded-full bg-white text-blue-600 w-8 h-8 text-center mr-2 text-green-500">3</span>
                            Read the Docs
                        </h5>
                    </div>
                    <ul class="list-inside pl-8 ml-2">
                        <li><a class="text-blue-700 text-sm" href="{{ relref . "/docs/reference" }}">Reference</a></li>
                        <li><a class="text-blue-700 text-sm" href="https://github.com/pulumi/examples">Examples</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section id="contact-us" class="bg-purple-500 mb-0 py-16 text-white">
        <div class="container mx-auto max-w-5xl">
            <div class="md:flex my-8 md:max-w-32 align-top">
                <div class="md:w-1/2">
                    <h2 class="text-white">Let Pulumi assist with your cloud infrastructure.</h2>
                    <p>
                        Need help converting your Terraform templates into Pulumi code? Drop us a line.
                    </p>
                </div>
                <div class="md:w-1/2 md:ml-8">
                    <div class="hs-form-white">
                        <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
                        <script>
                            hbspt.forms.create({
                                portalId: "4429525",
                                formId: "123cfbdb-9ce4-4d33-a9b7-c30302463d7a"
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="bg-gray-900 py-16 text-white">
        <div class="container mx-auto max-w-5xl">
            <h3 class="text-white">More from Pulumi</h3>
            <div class="md:flex items-start">
                <div class="md:w-1/2">
                    <a href="https://www.youtube.com/watch?v=R3OfgFHkj3o">
                        <img class="rounded my-8 h-64" src="/images/screens/Migrating-to-Pulumi.png" alt="Migrating to Pulumi">
                    </a>
                    <h4 class="text-gray-100">Migrate to Pulumi</h4>
                    <p class="text-gray-400">
                        In this video, Pulumi CTO, Luke Hoban, discusses how to begin to
                        migrate to Pulumi from existing tools such as CloudFormation and
                        Terraform.
                    </p>
                    <a class="text-orange-500" href="https://www.youtube.com/watch?v=R3OfgFHkj3o">Learn more</a>
                </div>
                <div class="md:w-1/2 md:ml-8">
                    <a href="/blog/build-a-video-thumbnailer-with-pulumi-using-lambdas-containers-and-infrastructure-on-aws">
                        <img class="rounded my-8 h-64" src="/images/screens/video-thumbnail-diagram.png" alt="Video thumbnail diagram">
                    </a>
                    <h4 class="text-gray-100">Serverless, Containers, and Infrastructure</h4>
                    <p class="text-gray-400">
                        In this blog post, we show how productive Pulumi can be at combining
                        different aspects of cloud architecture for truly cloud native
                        programming.
                    </p>
                    <a class="text-orange-500" href="/blog/build-a-video-thumbnailer-with-pulumi-using-lambdas-containers-and-infrastructure-on-aws">Learn more</a>
                </div>
            </div>
        </div>
    </section>
{{ end }}
