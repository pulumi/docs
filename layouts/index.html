{{ define "hero" }}
    <header class="relative w-full">
        <div class="border-b border-gray-300">
            <div class="container mx-auto px-6 py-8 lg:py-12">
                <div class="flex flex-col lg:flex-row gap-8 items-start">
                    <!-- Left: Messaging (aligned to top) -->
                    <div class="w-full lg:w-1/2 lg:pt-4">
                        <h1 class="mb-4">
                            <span class="block mb-2 text-5xl lg:text-6xl" data-text="{{ index (.Params.hero.title) 0 }}"><span class="rainbow-text">{{ index (.Params.hero.title) 0 }}</span></span>
                            <span class="block text-xl lg:text-2xl text-gray-600" data-text="{{ index (.Params.hero.title) 1 }}">{{ index (.Params.hero.title) 1 }}</span>
                        </h1>

                        <p class="text-lg text-gray-700 mb-8">{{ .Params.hero.description | markdownify }}</p>

                        <div class="flex flex-col sm:flex-row gap-4">
                            <a class="btn-primary py-4 px-8" href="{{ .Params.hero.cta_link }}">{{ .Params.hero.cta_text }}</a>
                            <a class="btn-secondary py-4 px-8 rounded-full" href="{{ .Params.hero.secondary_cta_link }}">{{ .Params.hero.secondary_cta_text }}</a>
                        </div>
                    </div>
                    
                    <!-- Right: Code Example (expands naturally) -->
                    <div class="w-full lg:w-1/2 lg:max-w-xl">
                        <div class="rounded-lg shadow-md border border-gray-200">
                            <script>
                                // Randomize initial language selection and auto-rotate
                                document.addEventListener('DOMContentLoaded', function() {
                                    const languages = ['typescript', 'python', 'go', 'csharp', 'java'];
                                    let currentIndex = Math.floor(Math.random() * languages.length);
                                    const chooser = document.querySelector('pulumi-chooser[type="language"]');
                                    
                                    if (chooser) {
                                        // Set initial random language
                                        setTimeout(() => {
                                            chooser.selection = languages[currentIndex];
                                        }, 100);
                                        
                                        // Auto-rotate every 5 seconds
                                        let rotationInterval = setInterval(() => {
                                            currentIndex = (currentIndex + 1) % languages.length;
                                            chooser.selection = languages[currentIndex];
                                        }, 5000);
                                        
                                        // Stop auto-rotation if user manually selects a language
                                        chooser.addEventListener('change', () => {
                                            clearInterval(rotationInterval);
                                        });
                                    }
                                });
                            </script>
                            <pulumi-chooser type="language" options="typescript,python,go,csharp,java">
                                <pulumi-choosable type="language" class="highlight" value="typescript">
                                    <img class="w-full h-auto block"
                                        src="/images/home/typescript.svg"
                                        alt="Pulumi code in TypeScript with IDE autocomplete" />
                                </pulumi-choosable>
                                <pulumi-choosable type="language" class="highlight" value="python">
                                    <img class="w-full h-auto block"
                                        src="/images/home/python.svg"
                                        alt="Pulumi code in Python with IDE autocomplete" />
                                </pulumi-choosable>
                                <pulumi-choosable type="language" class="highlight" value="go">
                                    <img class="w-full h-auto block"
                                        src="/images/home/go.svg"
                                        alt="Pulumi code in Go with IDE autocomplete" />
                                </pulumi-choosable>
                                <pulumi-choosable type="language" class="highlight" value="csharp">
                                    <img class="w-full h-auto block"
                                        src="/images/home/c-sharp.svg"
                                        alt="Pulumi code in C# with IDE autocomplete" />
                                </pulumi-choosable>
                                <pulumi-choosable type="language" class="highlight" value="java">
                                    <img class="w-full h-auto block"
                                        src="/images/home/java.svg"
                                        alt="Pulumi code in Java with IDE autocomplete" />
                                </pulumi-choosable>
                            </pulumi-chooser>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
{{ end }}

{{ define "main" }}
    {{ $pageContext := . }}
    
    <!-- Customer Logos - Social Proof First -->
    <section class="container mx-auto text-center overflow-hidden px-3 mt-8">
        {{ if .Params.customer_logos.title }}
        <h3 class="text-center text-xl mb-4">
            <a href="/case-studies" class="hover:underline">{{ .Params.customer_logos.title }}</a>
        </h3>
        {{ end }}
        <div class="mb-8">
            {{ partial "stacked-carousel.html" (dict "logos" .Params.customer_logos.logos "single_row" true "gray_hover" true ) }}
        </div>
    </section>

    <!-- 3 Core Benefits -->
    <section id="benefits" class="text-center my-6">
        <div class="container mx-auto flex flex-wrap justify-content items-stretch text-left p-8">
            {{ range $item := .Params.pillars.items }}
                <div class="w-full lg:w-1/3 p-3">
                    <div class="h-full card shadow-xl border-2 border-gray-200 bg-white p-12">
                        <div class="flex flex-row items-center justify-left">
                            <div class="icon-section text-center">
                                {{ partial "color-icon.html" (dict "icon" $item.icon "icon_color" $item.icon_color) }}
                            </div>
                            <div class="ml-4">
                                <h5>{{ $item.title }}</h5>
                            </div>
                        </div>
                        <div class="mt-6">
                            <p>{{ $item.description | markdownify }}</p>
                        </div>
                    </div>
                </div>
            {{ end }}
        </div>
    </section>

    <!-- Quick Start Guide - Show How Easy It Is -->
    {{ partial "home/quick-start.html" . }}

    <!-- Why Pulumi vs Terraform Comparison -->
    {{ partial "home/why-pulumi.html" . }}

    <!-- Platform Capabilities - ONE unified section instead of 4 -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="mb-4">Everything You Need as You Scale</h2>
                <p class="text-lg text-gray-700 max-w-2xl mx-auto">
                    Start with open source. Add capabilities as your team grows.
                </p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto">
                <div class="p-6">
                    <div class="text-purple-600 text-2xl mb-3">
                        <i class="fas fa-key"></i>
                    </div>
                    <h4 class="mb-2">Secrets Management</h4>
                    <p class="text-sm text-gray-600 mb-3">Automatically encrypt secrets. Integrate with any vault. Never hardcode credentials again.</p>
                    <a href="/product/esc" class="text-sm text-purple-600 hover:text-purple-700">Learn more →</a>
                </div>
                
                <div class="p-6">
                    <div class="text-purple-600 text-2xl mb-3">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h4 class="mb-2">Policy as Code</h4>
                    <p class="text-sm text-gray-600 mb-3">Define guardrails in code. Prevent mistakes before they happen. Stay compliant automatically.</p>
                    <a href="/crossguard" class="text-sm text-purple-600 hover:text-purple-700">Learn more →</a>
                </div>
                
                <div class="p-6">
                    <div class="text-purple-600 text-2xl mb-3">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h4 class="mb-2">Cloud Intelligence</h4>
                    <p class="text-sm text-gray-600 mb-3">Full visibility into your cloud estate. Discover unknown resources. Find waste. Ensure governance.</p>
                    <a href="/product/pulumi-insights" class="text-sm text-purple-600 hover:text-purple-700">Learn more →</a>
                </div>
                
                <div class="p-6">
                    <div class="text-purple-600 text-2xl mb-3">
                        <i class="fas fa-users"></i>
                    </div>
                    <h4 class="mb-2">Team Collaboration</h4>
                    <p class="text-sm text-gray-600 mb-3">Share state safely. Review changes together. Manage permissions. Work better as a team.</p>
                    <a href="/product/pulumi-cloud" class="text-sm text-purple-600 hover:text-purple-700">Learn more →</a>
                </div>
                
                <div class="p-6">
                    <div class="text-purple-600 text-2xl mb-3">
                        <i class="fas fa-cubes"></i>
                    </div>
                    <h4 class="mb-2">Developer Portal</h4>
                    <p class="text-sm text-gray-600 mb-3">Let developers self-serve infrastructure. Create golden paths. Apply guardrails automatically.</p>
                    <a href="/product/internal-developer-platforms" class="text-sm text-purple-600 hover:text-purple-700">Learn more →</a>
                </div>
                
                <div class="p-6">
                    <div class="text-purple-600 text-2xl mb-3">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h4 class="mb-2">AI Assistant</h4>
                    <p class="text-sm text-gray-600 mb-3">Get help writing infrastructure code. Debug faster. Learn as you build.</p>
                    <a href="/ai" class="text-sm text-purple-600 hover:text-purple-700">Learn more →</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Combined Testimonials & Community -->
    <section class="py-16 bg-gradient-to-b from-white to-purple-50">
        <div class="container mx-auto px-6">
            <!-- Testimonials Grid -->
            <h2 class="text-center mb-8">Trusted by Engineering Teams Worldwide</h2>
            
            <div class="grid md:grid-cols-3 gap-6 max-w-5xl mx-auto mb-12">
                <div class="bg-white p-6 rounded-lg border border-gray-200">
                    <div class="text-purple-600 font-bold text-sm mb-2">3x faster deployments</div>
                    <p class="text-gray-700 mb-4 text-sm">
                        "Pulumi helped our team ship a new product faster with multi-cloud, multi-region Kubernetes clusters"
                    </p>
                    <div class="flex items-center">
                        <img src="/logos/customers/snowflake-logo.svg" class="h-5 mr-3" alt="Snowflake">
                        <div>
                            <p class="text-xs text-gray-600">
                                <strong>Justin Fitzhugh</strong><br>
                                VP of Cloud Platform Engineering
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-lg border border-gray-200">
                    <div class="text-purple-600 font-bold text-sm mb-2">50% less code</div>
                    <p class="text-gray-700 mb-4 text-sm">
                        "Nothing is better than having standard programming languages for building infrastructure. We reduced our IaC by half."
                    </p>
                    <div class="flex items-center">
                        <img src="/logos/customers/panther.svg" class="h-5 mr-3" alt="Panther Labs">
                        <div>
                            <p class="text-xs text-gray-600">
                                <strong>Austin Byers</strong><br>
                                Principal Platform Engineer
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-lg border border-gray-200">
                    <div class="text-purple-600 font-bold text-sm mb-2">100+ developers enabled</div>
                    <p class="text-gray-700 mb-4 text-sm">
                        "We've made cloud infrastructure really easy to use for our developers. Self-service platform for our entire team."
                    </p>
                    <div class="flex items-center">
                        <img src="/logos/customers/clear.png" class="h-5 mr-3" alt="Clear">
                        <div>
                            <p class="text-xs text-gray-600">
                                <strong>James Forcier</strong><br>
                                Staff Software Engineer
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Community Stats -->
            <div class="text-center bg-purple-600 rounded-lg p-8 max-w-4xl mx-auto">
                <h3 class="text-white text-2xl mb-6">Join Our Open Source Community</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-6">
                    <div>
                        <div class="text-3xl font-bold text-white">20k+</div>
                        <div class="text-purple-200 text-sm">GitHub Stars</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-white">10k+</div>
                        <div class="text-purple-200 text-sm">Slack Members</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-white">2k+</div>
                        <div class="text-purple-200 text-sm">Contributors</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold text-white">1000s</div>
                        <div class="text-purple-200 text-sm">Cloud Providers</div>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="https://github.com/pulumi/pulumi" class="btn bg-white text-purple-600 hover:bg-gray-100">
                        <i class="fab fa-github mr-2"></i>Star on GitHub
                    </a>
                    <a href="https://slack.pulumi.com" class="btn bg-purple-700 text-white hover:bg-purple-800">
                        <i class="fab fa-slack mr-2"></i>Join Slack
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Trust Badges for Enterprise -->
    <section class="py-12 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-8">
                <h3 class="text-xl text-gray-700">Enterprise-Grade Security & Compliance</h3>
            </div>
            <div class="flex flex-wrap justify-center items-center gap-8">
                <div class="text-center">
                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                        <i class="fas fa-shield-alt text-3xl text-purple-600 mb-2"></i>
                        <div class="text-sm font-semibold">SOC 2 Type II</div>
                        <div class="text-xs text-gray-600">Certified</div>
                    </div>
                </div>
                <div class="text-center">
                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                        <i class="fas fa-certificate text-3xl text-purple-600 mb-2"></i>
                        <div class="text-sm font-semibold">ISO 27001</div>
                        <div class="text-xs text-gray-600">Compliant</div>
                    </div>
                </div>
                <div class="text-center">
                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                        <i class="fas fa-user-shield text-3xl text-purple-600 mb-2"></i>
                        <div class="text-sm font-semibold">SAML SSO</div>
                        <div class="text-xs text-gray-600">Supported</div>
                    </div>
                </div>
                <div class="text-center">
                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                        <i class="fas fa-lock text-3xl text-purple-600 mb-2"></i>
                        <div class="text-sm font-semibold">Encryption</div>
                        <div class="text-xs text-gray-600">At Rest & In Transit</div>
                    </div>
                </div>
                <div class="text-center">
                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                        <i class="fas fa-clipboard-check text-3xl text-purple-600 mb-2"></i>
                        <div class="text-sm font-semibold">RBAC</div>
                        <div class="text-xs text-gray-600">Fine-grained Access</div>
                    </div>
                </div>
            </div>
            <div class="text-center mt-6">
                <a href="/enterprise/" class="text-purple-600 hover:text-purple-700 text-sm">
                    Learn more about enterprise features →
                </a>
            </div>
        </div>
    </section>
{{ end }}

{{ define "foot" }}
    <script async defer src="https://buttons.github.io/buttons.js"></script>
{{ end }}